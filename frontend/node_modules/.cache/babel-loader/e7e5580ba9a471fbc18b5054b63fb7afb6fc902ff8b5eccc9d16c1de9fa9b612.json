{"ast":null,"code":"import React,{useRef,useCallback}from'react';import{Bold,Italic,Underline,List,ListOrdered,Code,Link,Image,Heading2,AlignLeft}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const tools=[{cmd:'bold',icon:Bold,title:'Bold'},{cmd:'italic',icon:Italic,title:'Italic'},{cmd:'underline',icon:Underline,title:'Underline'},{cmd:'insertUnorderedList',icon:List,title:'Bullet List'},{cmd:'insertOrderedList',icon:ListOrdered,title:'Numbered List'},{cmd:'formatBlock_h2',icon:Heading2,title:'Heading'},{cmd:'formatBlock_pre',icon:Code,title:'Code Block'}];export default function RichTextEditor(_ref){let{value,onChange,placeholder='Start writing...',minHeight=200}=_ref;const editorRef=useRef(null);const exec=useCallback(cmd=>{if(cmd==='formatBlock_h2')document.execCommand('formatBlock',false,'<h2>');else if(cmd==='formatBlock_pre')document.execCommand('formatBlock',false,'<pre>');else document.execCommand(cmd,false,null);if(editorRef.current&&onChange)onChange(editorRef.current.innerHTML);},[onChange]);const insertImage=()=>{const url=prompt('Enter image URL:');if(url){document.execCommand('insertImage',false,url);if(editorRef.current&&onChange)onChange(editorRef.current.innerHTML);}};const insertLink=()=>{const url=prompt('Enter URL:');if(url){document.execCommand('createLink',false,url);if(editorRef.current&&onChange)onChange(editorRef.current.innerHTML);}};const insertYouTube=()=>{const url=prompt('Enter YouTube URL:');if(url){var _url$match;const id=(_url$match=url.match(/(?:youtu\\.be\\/|v=)([^&]+)/))===null||_url$match===void 0?void 0:_url$match[1];if(id){const html=\"<div style=\\\"position:relative;padding-bottom:56.25%;height:0;overflow:hidden;margin:1rem 0;border-radius:8px\\\"><iframe src=\\\"https://www.youtube.com/embed/\".concat(id,\"\\\" style=\\\"position:absolute;top:0;left:0;width:100%;height:100%;border:0\\\" allowfullscreen></iframe></div>\");document.execCommand('insertHTML',false,html);if(editorRef.current&&onChange)onChange(editorRef.current.innerHTML);}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"border border-[#E2E8F0] rounded-xl overflow-hidden bg-white\",\"data-testid\":\"rich-text-editor\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-0.5 p-2 border-b border-[#E2E8F0] bg-[#F8FAFC] flex-wrap\",children:[tools.map(t=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>exec(t.cmd),title:t.title,className:\"p-1.5 rounded-lg hover:bg-[#E2E8F0] text-[#64748B] hover:text-[#0F172A] transition-colors\",children:/*#__PURE__*/_jsx(t.icon,{size:15})},t.cmd)),/*#__PURE__*/_jsx(\"div\",{className:\"w-px h-5 bg-[#E2E8F0] mx-1\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:insertImage,title:\"Insert Image\",className:\"p-1.5 rounded-lg hover:bg-[#E2E8F0] text-[#64748B] hover:text-[#0F172A] transition-colors\",children:/*#__PURE__*/_jsx(Image,{size:15})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:insertLink,title:\"Insert Link\",className:\"p-1.5 rounded-lg hover:bg-[#E2E8F0] text-[#64748B] hover:text-[#0F172A] transition-colors\",children:/*#__PURE__*/_jsx(Link,{size:15})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:insertYouTube,title:\"YouTube Embed\",className:\"p-1.5 rounded-lg hover:bg-[#E2E8F0] text-[#64748B] hover:text-[#0F172A] transition-colors text-[10px] font-bold\",style:{fontFamily:'Space Mono'},children:\"YT\"})]}),/*#__PURE__*/_jsx(\"div\",{ref:editorRef,contentEditable:true,className:\"prose prose-sm max-w-none p-4 outline-none\",style:{minHeight},dangerouslySetInnerHTML:{__html:value||''},onInput:()=>{if(editorRef.current&&onChange)onChange(editorRef.current.innerHTML);},\"data-testid\":\"rich-text-content\"}),!value&&/*#__PURE__*/_jsx(\"p\",{className:\"absolute top-16 left-4 text-[#94A3B8] text-sm pointer-events-none\",children:placeholder})]});}","map":{"version":3,"names":["React","useRef","useCallback","Bold","Italic","Underline","List","ListOrdered","Code","Link","Image","Heading2","AlignLeft","jsx","_jsx","jsxs","_jsxs","tools","cmd","icon","title","RichTextEditor","_ref","value","onChange","placeholder","minHeight","editorRef","exec","document","execCommand","current","innerHTML","insertImage","url","prompt","insertLink","insertYouTube","_url$match","id","match","html","concat","className","children","map","t","type","onClick","size","style","fontFamily","ref","contentEditable","dangerouslySetInnerHTML","__html","onInput"],"sources":["/app/frontend/src/components/RichTextEditor.js"],"sourcesContent":["import React, { useRef, useCallback } from 'react';\nimport { Bold, Italic, Underline, List, ListOrdered, Code, Link, Image, Heading2, AlignLeft } from 'lucide-react';\n\nconst tools = [\n  { cmd: 'bold', icon: Bold, title: 'Bold' },\n  { cmd: 'italic', icon: Italic, title: 'Italic' },\n  { cmd: 'underline', icon: Underline, title: 'Underline' },\n  { cmd: 'insertUnorderedList', icon: List, title: 'Bullet List' },\n  { cmd: 'insertOrderedList', icon: ListOrdered, title: 'Numbered List' },\n  { cmd: 'formatBlock_h2', icon: Heading2, title: 'Heading' },\n  { cmd: 'formatBlock_pre', icon: Code, title: 'Code Block' },\n];\n\nexport default function RichTextEditor({ value, onChange, placeholder = 'Start writing...', minHeight = 200 }) {\n  const editorRef = useRef(null);\n\n  const exec = useCallback((cmd) => {\n    if (cmd === 'formatBlock_h2') document.execCommand('formatBlock', false, '<h2>');\n    else if (cmd === 'formatBlock_pre') document.execCommand('formatBlock', false, '<pre>');\n    else document.execCommand(cmd, false, null);\n    if (editorRef.current && onChange) onChange(editorRef.current.innerHTML);\n  }, [onChange]);\n\n  const insertImage = () => {\n    const url = prompt('Enter image URL:');\n    if (url) {\n      document.execCommand('insertImage', false, url);\n      if (editorRef.current && onChange) onChange(editorRef.current.innerHTML);\n    }\n  };\n\n  const insertLink = () => {\n    const url = prompt('Enter URL:');\n    if (url) {\n      document.execCommand('createLink', false, url);\n      if (editorRef.current && onChange) onChange(editorRef.current.innerHTML);\n    }\n  };\n\n  const insertYouTube = () => {\n    const url = prompt('Enter YouTube URL:');\n    if (url) {\n      const id = url.match(/(?:youtu\\.be\\/|v=)([^&]+)/)?.[1];\n      if (id) {\n        const html = `<div style=\"position:relative;padding-bottom:56.25%;height:0;overflow:hidden;margin:1rem 0;border-radius:8px\"><iframe src=\"https://www.youtube.com/embed/${id}\" style=\"position:absolute;top:0;left:0;width:100%;height:100%;border:0\" allowfullscreen></iframe></div>`;\n        document.execCommand('insertHTML', false, html);\n        if (editorRef.current && onChange) onChange(editorRef.current.innerHTML);\n      }\n    }\n  };\n\n  return (\n    <div className=\"border border-[#E2E8F0] rounded-xl overflow-hidden bg-white\" data-testid=\"rich-text-editor\">\n      <div className=\"flex items-center gap-0.5 p-2 border-b border-[#E2E8F0] bg-[#F8FAFC] flex-wrap\">\n        {tools.map(t => (\n          <button key={t.cmd} type=\"button\" onClick={() => exec(t.cmd)} title={t.title}\n            className=\"p-1.5 rounded-lg hover:bg-[#E2E8F0] text-[#64748B] hover:text-[#0F172A] transition-colors\">\n            <t.icon size={15} />\n          </button>\n        ))}\n        <div className=\"w-px h-5 bg-[#E2E8F0] mx-1\" />\n        <button type=\"button\" onClick={insertImage} title=\"Insert Image\" className=\"p-1.5 rounded-lg hover:bg-[#E2E8F0] text-[#64748B] hover:text-[#0F172A] transition-colors\"><Image size={15} /></button>\n        <button type=\"button\" onClick={insertLink} title=\"Insert Link\" className=\"p-1.5 rounded-lg hover:bg-[#E2E8F0] text-[#64748B] hover:text-[#0F172A] transition-colors\"><Link size={15} /></button>\n        <button type=\"button\" onClick={insertYouTube} title=\"YouTube Embed\" className=\"p-1.5 rounded-lg hover:bg-[#E2E8F0] text-[#64748B] hover:text-[#0F172A] transition-colors text-[10px] font-bold\" style={{ fontFamily: 'Space Mono' }}>YT</button>\n      </div>\n      <div\n        ref={editorRef}\n        contentEditable\n        className=\"prose prose-sm max-w-none p-4 outline-none\"\n        style={{ minHeight }}\n        dangerouslySetInnerHTML={{ __html: value || '' }}\n        onInput={() => { if (editorRef.current && onChange) onChange(editorRef.current.innerHTML); }}\n        data-testid=\"rich-text-content\"\n      />\n      {!value && <p className=\"absolute top-16 left-4 text-[#94A3B8] text-sm pointer-events-none\">{placeholder}</p>}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}