{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import API from'../../api';import{useAuth}from'../../context/AuthContext';import{Plus,Search,Edit2,Trash2,Eye,X,ChevronRight,GripVertical}from'lucide-react';import ConfirmModal from'../../components/ConfirmModal';import RichTextEditor from'../../components/RichTextEditor';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CATEGORIES=['Development','Data Science','Design','Marketing','Business','General'];const LEVELS=['beginner','intermediate','advanced'];export default function Courses(){const{user}=useAuth();const[courses,setCourses]=useState([]);const[loading,setLoading]=useState(true);const[search,setSearch]=useState('');const[showForm,setShowForm]=useState(false);const[editing,setEditing]=useState(null);const[showBuilder,setShowBuilder]=useState(null);const[form,setForm]=useState({title:'',description:'',category:'General',level:'beginner',duration_weeks:4,status:'draft',visibility:'public',prerequisites:'',certificate_enabled:false,instructor_ids:[],thumbnail:''});const[instructors,setInstructors]=useState([]);const[modules,setModules]=useState([]);const[lessonForm,setLessonForm]=useState(null);const[moduleForm,setModuleForm]=useState(null);const[confirmDelete,setConfirmDelete]=useState(null);const[editingLesson,setEditingLesson]=useState(null);const fetchCourses=()=>{API.get('/api/courses',{params:{search:search||undefined}}).then(r=>setCourses(r.data)).catch(()=>{}).finally(()=>setLoading(false));};useEffect(()=>{fetchCourses();},[search]);useEffect(()=>{if((user===null||user===void 0?void 0:user.role)==='super_admin'){API.get('/api/users',{params:{role:'instructor'}}).then(r=>setInstructors(r.data)).catch(()=>{});}},[]);const openEdit=c=>{setForm({title:c.title,description:c.description,category:c.category,level:c.level,duration_weeks:c.duration_weeks,status:c.status,visibility:c.visibility,prerequisites:c.prerequisites||'',certificate_enabled:c.certificate_enabled,instructor_ids:c.instructor_ids||[],thumbnail:c.thumbnail||''});setEditing(c.course_id);setShowForm(true);};const openNew=()=>{setForm({title:'',description:'',category:'General',level:'beginner',duration_weeks:4,status:'draft',visibility:'public',prerequisites:'',certificate_enabled:false,instructor_ids:[],thumbnail:''});setEditing(null);setShowForm(true);};const saveCourse=async()=>{try{if(editing){await API.put(\"/api/courses/\".concat(editing),form);toast.success('Course updated');}else{await API.post('/api/courses',form);toast.success('Course created');}setShowForm(false);fetchCourses();}catch(e){var _e$response,_e$response$data;toast.error(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.detail)||'Error saving course');}};const deleteCourse=async id=>{try{await API.delete(\"/api/courses/\".concat(id));toast.success('Course deleted');fetchCourses();}catch(_unused){toast.error('Error deleting');}setConfirmDelete(null);};const openBuilder=async courseId=>{try{const res=await API.get(\"/api/courses/\".concat(courseId,\"/modules\"));setModules(res.data);setShowBuilder(courseId);}catch(_unused2){toast.error('Error loading modules');}};const addModule=async()=>{if(!(moduleForm!==null&&moduleForm!==void 0&&moduleForm.title))return;try{await API.post(\"/api/courses/\".concat(showBuilder,\"/modules\"),moduleForm);const res=await API.get(\"/api/courses/\".concat(showBuilder,\"/modules\"));setModules(res.data);setModuleForm(null);toast.success('Module added');}catch(_unused3){toast.error('Error adding module');}};const deleteModule=async moduleId=>{try{await API.delete(\"/api/modules/\".concat(moduleId));setModules(modules.filter(m=>m.module_id!==moduleId));toast.success('Module deleted');}catch(_unused4){toast.error('Error deleting module');}};const addLesson=async moduleId=>{if(!(lessonForm!==null&&lessonForm!==void 0&&lessonForm.title))return;try{await API.post(\"/api/modules/\".concat(moduleId,\"/lessons\"),lessonForm);const res=await API.get(\"/api/courses/\".concat(showBuilder,\"/modules\"));setModules(res.data);setLessonForm(null);toast.success('Lesson added');}catch(_unused5){toast.error('Error adding lesson');}};const deleteLesson=async lessonId=>{try{await API.delete(\"/api/lessons/\".concat(lessonId));const res=await API.get(\"/api/courses/\".concat(showBuilder,\"/modules\"));setModules(res.data);toast.success('Lesson deleted');}catch(_unused6){toast.error('Error deleting lesson');}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin w-8 h-8 border-4 border-teal-500 border-t-transparent rounded-full\"})});return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6 animate-fade-in\",\"data-testid\":\"courses-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-[#1C1917]\",style:{fontFamily:'Plus Jakarta Sans'},children:\"Courses\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-[#57534E] mt-1\",children:[courses.length,\" courses total\"]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:openNew,className:\"flex items-center gap-2 px-4 py-2 bg-[#0D9488] text-white rounded-lg text-sm font-medium hover:bg-[#0D9488]/90 active:scale-[0.98] transition-all\",\"data-testid\":\"create-course-btn\",children:[/*#__PURE__*/_jsx(Plus,{size:16}),\"New Course\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Search,{size:16,className:\"absolute left-3 top-1/2 -translate-y-1/2 text-[#A8A29E]\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:search,onChange:e=>setSearch(e.target.value),placeholder:\"Search courses...\",className:\"w-full pl-9 pr-4 py-2.5 rounded-lg bg-white border border-[#E7E5E4] text-sm focus:border-[#14B8A6] outline-none\",\"data-testid\":\"course-search\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:[courses.map(c=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl border border-[#E7E5E4] overflow-hidden hover:shadow-md hover:-translate-y-0.5 transition-all duration-300 group\",\"data-testid\":\"course-card-\".concat(c.course_id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"h-36 bg-gradient-to-br from-indigo-100 to-purple-50 relative overflow-hidden\",children:[c.thumbnail&&/*#__PURE__*/_jsx(\"img\",{src:c.thumbnail,alt:\"\",className:\"w-full h-full object-cover\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-3 right-3 flex gap-1.5\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-0.5 rounded-full text-xs font-medium \".concat(c.status==='published'?'bg-green-100 text-green-700':'bg-amber-100 text-amber-700'),children:c.status})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-[#14B8A6] bg-[#F0FDFA] px-2 py-0.5 rounded\",children:c.category}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-[#A8A29E] capitalize\",children:c.level})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-[#1C1917] mb-1 line-clamp-1\",style:{fontFamily:'Plus Jakarta Sans'},children:c.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-[#57534E] line-clamp-2 mb-3\",children:c.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs text-[#A8A29E]\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[c.module_count||0,\" modules \\xB7 \",c.lesson_count||0,\" lessons\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[c.enrollment_count||0,\" enrolled\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1.5 mt-3 pt-3 border-t border-[#F5F5F4]\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>openBuilder(c.course_id),className:\"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 text-xs font-medium text-[#14B8A6] bg-[#F0FDFA] rounded-lg hover:bg-[#CCFBF1] transition-colors\",\"data-testid\":\"manage-course-\".concat(c.course_id),children:[/*#__PURE__*/_jsx(Eye,{size:12}),\"Manage\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openEdit(c),className:\"p-1.5 rounded-lg hover:bg-[#F5F5F4] text-[#57534E] transition-colors\",\"data-testid\":\"edit-course-\".concat(c.course_id),children:/*#__PURE__*/_jsx(Edit2,{size:14})}),(user===null||user===void 0?void 0:user.role)==='super_admin'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setConfirmDelete(c),className:\"p-1.5 rounded-lg hover:bg-red-50 text-red-400 transition-colors\",\"data-testid\":\"delete-course-\".concat(c.course_id),children:/*#__PURE__*/_jsx(Trash2,{size:14})})]})]})]},c.course_id)),courses.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"col-span-full text-center py-12 text-[#A8A29E]\",children:\"No courses found. Create your first course!\"})]}),showForm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/30 z-50 flex items-center justify-center p-4\",onClick:()=>setShowForm(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[85vh] overflow-auto\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-5 border-b border-[#E7E5E4]\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",style:{fontFamily:'Plus Jakarta Sans'},children:editing?'Edit Course':'Create Course'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(false),className:\"p-1 rounded hover:bg-[#F5F5F4]\",children:/*#__PURE__*/_jsx(X,{size:18})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-5 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Title *\"}),/*#__PURE__*/_jsx(\"input\",{value:form.title,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{title:e.target.value})),className:\"w-full px-3 py-2 rounded-lg border border-[#E7E5E4] text-sm focus:border-[#14B8A6] outline-none\",\"data-testid\":\"course-title-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:form.description,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{description:e.target.value})),rows:3,className:\"w-full px-3 py-2 rounded-lg border border-[#E7E5E4] text-sm focus:border-[#14B8A6] outline-none resize-none\",\"data-testid\":\"course-description-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Category\"}),/*#__PURE__*/_jsx(\"select\",{value:form.category,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{category:e.target.value})),className:\"w-full px-3 py-2 rounded-lg border border-[#E7E5E4] text-sm focus:border-[#14B8A6] outline-none\",\"data-testid\":\"course-category-select\",children:CATEGORIES.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c,children:c},c))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Level\"}),/*#__PURE__*/_jsx(\"select\",{value:form.level,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{level:e.target.value})),className:\"w-full px-3 py-2 rounded-lg border border-[#E7E5E4] text-sm focus:border-[#14B8A6] outline-none capitalize\",\"data-testid\":\"course-level-select\",children:LEVELS.map(l=>/*#__PURE__*/_jsx(\"option\",{value:l,children:l},l))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:form.status,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{status:e.target.value})),className:\"w-full px-3 py-2 rounded-lg border border-[#E7E5E4] text-sm outline-none\",\"data-testid\":\"course-status-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"draft\",children:\"Draft\"}),/*#__PURE__*/_jsx(\"option\",{value:\"published\",children:\"Published\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Duration (weeks)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:form.duration_weeks,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{duration_weeks:parseInt(e.target.value)||1})),className:\"w-full px-3 py-2 rounded-lg border border-[#E7E5E4] text-sm outline-none\",\"data-testid\":\"course-duration-input\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Thumbnail URL\"}),/*#__PURE__*/_jsx(\"input\",{value:form.thumbnail,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{thumbnail:e.target.value})),className:\"w-full px-3 py-2 rounded-lg border border-[#E7E5E4] text-sm outline-none\",placeholder:\"https://...\",\"data-testid\":\"course-thumbnail-input\"})]}),instructors.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Instructors\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1\",children:instructors.map(inst=>/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 text-sm cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:form.instructor_ids.includes(inst.user_id),onChange:e=>{setForm(_objectSpread(_objectSpread({},form),{},{instructor_ids:e.target.checked?[...form.instructor_ids,inst.user_id]:form.instructor_ids.filter(id=>id!==inst.user_id)}));},className:\"rounded\"}),inst.name]},inst.user_id))})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 text-sm cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:form.certificate_enabled,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{certificate_enabled:e.target.checked})),className:\"rounded\"}),\"Certificate enabled\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-2 p-5 border-t border-[#E7E5E4]\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(false),className:\"px-4 py-2 text-sm font-medium text-[#57534E] hover:bg-[#F5F5F4] rounded-lg transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:saveCourse,className:\"px-4 py-2 text-sm font-medium text-white bg-[#0D9488] rounded-lg hover:bg-[#0D9488]/90 active:scale-[0.98] transition-all\",\"data-testid\":\"save-course-btn\",children:\"Save Course\"})]})]})}),showBuilder&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/30 z-50 flex items-center justify-center p-4\",onClick:()=>setShowBuilder(null),children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[85vh] overflow-auto\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-5 border-b border-[#E7E5E4]\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",style:{fontFamily:'Plus Jakarta Sans'},children:\"Course Builder\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowBuilder(null),className:\"p-1 rounded hover:bg-[#F5F5F4]\",children:/*#__PURE__*/_jsx(X,{size:18})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-5 space-y-4\",children:[modules.map((m,mi)=>{var _m$lessons,_m$lessons2;return/*#__PURE__*/_jsxs(\"div\",{className:\"border border-[#E7E5E4] rounded-xl overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 bg-[#F5F5F4]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(GripVertical,{size:16,className:\"text-[#A8A29E] cursor-grab\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-sm\",style:{fontFamily:'Plus Jakarta Sans'},children:[\"Module \",mi+1,\": \",m.title]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-[#A8A29E] mr-2\",children:[((_m$lessons=m.lessons)===null||_m$lessons===void 0?void 0:_m$lessons.length)||0,\" lessons\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteModule(m.module_id),className:\"p-1 rounded hover:bg-red-50 text-red-400\",children:/*#__PURE__*/_jsx(Trash2,{size:14})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 space-y-2\",children:[(_m$lessons2=m.lessons)===null||_m$lessons2===void 0?void 0:_m$lessons2.map((l,li)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-3 py-2 bg-white rounded-lg border border-[#E7E5E4] hover:border-[#14B8A6]/30 transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-[#A8A29E] w-5\",children:[li+1,\".\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-[#1C1917]\",children:l.title}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-1.5 py-0.5 rounded \".concat(l.type==='video'?'bg-blue-50 text-blue-600':l.type==='text'?'bg-green-50 text-green-600':'bg-purple-50 text-purple-600'),children:l.type})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteLesson(l.lesson_id),className:\"p-1 rounded hover:bg-red-50 text-red-400\",children:/*#__PURE__*/_jsx(Trash2,{size:12})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingLesson(l),className:\"p-1 rounded hover:bg-[#F0FDFA] text-[#0D9488]\",\"data-testid\":\"edit-lesson-\".concat(l.lesson_id),children:/*#__PURE__*/_jsx(Edit2,{size:12})})]},l.lesson_id)),(lessonForm===null||lessonForm===void 0?void 0:lessonForm.moduleId)===m.module_id?/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mt-2\",children:[/*#__PURE__*/_jsx(\"input\",{value:lessonForm.title||'',onChange:e=>setLessonForm(_objectSpread(_objectSpread({},lessonForm),{},{title:e.target.value})),placeholder:\"Lesson title\",className:\"flex-1 px-3 py-1.5 rounded-lg border border-[#E7E5E4] text-sm outline-none focus:border-[#14B8A6]\",\"data-testid\":\"lesson-title-input\"}),/*#__PURE__*/_jsxs(\"select\",{value:lessonForm.type||'text',onChange:e=>setLessonForm(_objectSpread(_objectSpread({},lessonForm),{},{type:e.target.value})),className:\"px-2 py-1.5 rounded-lg border border-[#E7E5E4] text-sm outline-none\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"text\",children:\"Text\"}),/*#__PURE__*/_jsx(\"option\",{value:\"video\",children:\"Video\"}),/*#__PURE__*/_jsx(\"option\",{value:\"youtube\",children:\"YouTube\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>addLesson(m.module_id),className:\"px-3 py-1.5 bg-[#0D9488] text-white rounded-lg text-sm font-medium\",\"data-testid\":\"save-lesson-btn\",children:\"Add\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setLessonForm(null),className:\"px-3 py-1.5 text-sm text-[#57534E] hover:bg-[#F5F5F4] rounded-lg\",children:\"Cancel\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setLessonForm({moduleId:m.module_id,title:'',type:'text',content:''}),className:\"text-xs text-[#14B8A6] font-medium hover:underline mt-1\",\"data-testid\":\"add-lesson-to-\".concat(m.module_id),children:\"+ Add Lesson\"})]})]},m.module_id);}),moduleForm?/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{value:moduleForm.title||'',onChange:e=>setModuleForm(_objectSpread(_objectSpread({},moduleForm),{},{title:e.target.value})),placeholder:\"Module title\",className:\"flex-1 px-3 py-2 rounded-lg border border-[#E7E5E4] text-sm outline-none focus:border-[#14B8A6]\",\"data-testid\":\"module-title-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addModule,className:\"px-4 py-2 bg-[#0D9488] text-white rounded-lg text-sm font-medium\",\"data-testid\":\"save-module-btn\",children:\"Add Module\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setModuleForm(null),className:\"px-3 py-2 text-sm text-[#57534E] hover:bg-[#F5F5F4] rounded-lg\",children:\"Cancel\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setModuleForm({title:'',description:''}),className:\"w-full py-3 border-2 border-dashed border-[#E7E5E4] rounded-xl text-sm font-medium text-[#14B8A6] hover:border-[#14B8A6] hover:bg-[#F0FDFA] transition-all\",\"data-testid\":\"add-module-btn\",children:\"+ Add Module\"})]})]})}),editingLesson&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-4\",onClick:()=>setEditingLesson(null),children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[85vh] overflow-auto\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-5 border-b border-[#E2E8F0]\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold\",children:\"Edit Lesson Content\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingLesson(null),className:\"p-1 rounded-lg hover:bg-[#F8FAFC]\",children:/*#__PURE__*/_jsx(X,{size:16})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-5 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-[12px] font-semibold text-[#334155] mb-1\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{value:editingLesson.title||'',onChange:e=>setEditingLesson(_objectSpread(_objectSpread({},editingLesson),{},{title:e.target.value})),className:\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-[12px] font-semibold text-[#334155] mb-1\",children:\"Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:editingLesson.type||'text',onChange:e=>setEditingLesson(_objectSpread(_objectSpread({},editingLesson),{},{type:e.target.value})),className:\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"text\",children:\"Text\"}),/*#__PURE__*/_jsx(\"option\",{value:\"video\",children:\"Video\"}),/*#__PURE__*/_jsx(\"option\",{value:\"youtube\",children:\"YouTube\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mixed\",children:\"Mixed\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-[12px] font-semibold text-[#334155] mb-1\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:editingLesson.status||'draft',onChange:e=>setEditingLesson(_objectSpread(_objectSpread({},editingLesson),{},{status:e.target.value})),className:\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"draft\",children:\"Draft\"}),/*#__PURE__*/_jsx(\"option\",{value:\"published\",children:\"Published\"})]})]})]}),editingLesson.type==='youtube'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-[12px] font-semibold text-[#334155] mb-1\",children:\"YouTube URL\"}),/*#__PURE__*/_jsx(\"input\",{value:editingLesson.youtube_url||'',onChange:e=>setEditingLesson(_objectSpread(_objectSpread({},editingLesson),{},{youtube_url:e.target.value})),className:\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none\",placeholder:\"https://youtube.com/watch?v=...\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-[12px] font-semibold text-[#334155] mb-1\",children:\"Content\"}),/*#__PURE__*/_jsx(RichTextEditor,{value:editingLesson.content,onChange:val=>setEditingLesson(_objectSpread(_objectSpread({},editingLesson),{},{content:val})),minHeight:250})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-2 p-5 border-t border-[#E2E8F0]\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingLesson(null),className:\"px-4 py-2 text-sm font-bold text-[#64748B] rounded-xl\",style:{fontFamily:'Space Mono'},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{try{await API.put(\"/api/lessons/\".concat(editingLesson.lesson_id),editingLesson);toast.success('Lesson saved');const res=await API.get(\"/api/courses/\".concat(showBuilder,\"/modules\"));setModules(res.data);setEditingLesson(null);}catch(_unused7){toast.error('Error saving');}},className:\"px-6 py-2 text-sm font-bold text-white bg-gradient-to-r from-[#0D9488] to-[#14B8A6] rounded-xl\",style:{fontFamily:'Space Mono'},\"data-testid\":\"save-lesson-content-btn\",children:\"Save Lesson\"})]})]})}),/*#__PURE__*/_jsx(ConfirmModal,{isOpen:!!confirmDelete,onClose:()=>setConfirmDelete(null),onConfirm:()=>deleteCourse(confirmDelete===null||confirmDelete===void 0?void 0:confirmDelete.course_id),title:\"Delete Course\",message:\"Are you sure you want to delete \\\"\".concat(confirmDelete===null||confirmDelete===void 0?void 0:confirmDelete.title,\"\\\"? This will permanently remove all modules and lessons within this course.\"),confirmLabel:\"Delete Course\",variant:\"danger\"})]});}","map":{"version":3,"names":["React","useState","useEffect","API","useAuth","Plus","Search","Edit2","Trash2","Eye","X","ChevronRight","GripVertical","ConfirmModal","RichTextEditor","toast","jsx","_jsx","jsxs","_jsxs","CATEGORIES","LEVELS","Courses","user","courses","setCourses","loading","setLoading","search","setSearch","showForm","setShowForm","editing","setEditing","showBuilder","setShowBuilder","form","setForm","title","description","category","level","duration_weeks","status","visibility","prerequisites","certificate_enabled","instructor_ids","thumbnail","instructors","setInstructors","modules","setModules","lessonForm","setLessonForm","moduleForm","setModuleForm","confirmDelete","setConfirmDelete","editingLesson","setEditingLesson","fetchCourses","get","params","undefined","then","r","data","catch","finally","role","openEdit","c","course_id","openNew","saveCourse","put","concat","success","post","e","_e$response","_e$response$data","error","response","detail","deleteCourse","id","delete","_unused","openBuilder","courseId","res","_unused2","addModule","_unused3","deleteModule","moduleId","filter","m","module_id","_unused4","addLesson","_unused5","deleteLesson","lessonId","_unused6","className","children","style","fontFamily","length","onClick","size","type","value","onChange","target","placeholder","map","src","alt","module_count","lesson_count","enrollment_count","stopPropagation","_objectSpread","rows","l","parseInt","inst","checked","includes","user_id","name","mi","_m$lessons","_m$lessons2","lessons","li","lesson_id","content","youtube_url","val","minHeight","_unused7","isOpen","onClose","onConfirm","message","confirmLabel","variant"],"sources":["/app/frontend/src/pages/admin/Courses.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport API from '../../api';\nimport { useAuth } from '../../context/AuthContext';\nimport { Plus, Search, Edit2, Trash2, Eye, X, ChevronRight, GripVertical } from 'lucide-react';\nimport ConfirmModal from '../../components/ConfirmModal';\nimport RichTextEditor from '../../components/RichTextEditor';\nimport toast from 'react-hot-toast';\n\nconst CATEGORIES = ['Development', 'Data Science', 'Design', 'Marketing', 'Business', 'General'];\nconst LEVELS = ['beginner', 'intermediate', 'advanced'];\n\nexport default function Courses() {\n  const { user } = useAuth();\n  const [courses, setCourses] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [search, setSearch] = useState('');\n  const [showForm, setShowForm] = useState(false);\n  const [editing, setEditing] = useState(null);\n  const [showBuilder, setShowBuilder] = useState(null);\n  const [form, setForm] = useState({ title: '', description: '', category: 'General', level: 'beginner', duration_weeks: 4, status: 'draft', visibility: 'public', prerequisites: '', certificate_enabled: false, instructor_ids: [], thumbnail: '' });\n  const [instructors, setInstructors] = useState([]);\n  const [modules, setModules] = useState([]);\n  const [lessonForm, setLessonForm] = useState(null);\n  const [moduleForm, setModuleForm] = useState(null);\n  const [confirmDelete, setConfirmDelete] = useState(null);\n  const [editingLesson, setEditingLesson] = useState(null);\n\n  const fetchCourses = () => {\n    API.get('/api/courses', { params: { search: search || undefined } }).then(r => setCourses(r.data)).catch(() => {}).finally(() => setLoading(false));\n  };\n\n  useEffect(() => { fetchCourses(); }, [search]);\n  useEffect(() => {\n    if (user?.role === 'super_admin') {\n      API.get('/api/users', { params: { role: 'instructor' } }).then(r => setInstructors(r.data)).catch(() => {});\n    }\n  }, []);\n\n  const openEdit = (c) => { setForm({ title: c.title, description: c.description, category: c.category, level: c.level, duration_weeks: c.duration_weeks, status: c.status, visibility: c.visibility, prerequisites: c.prerequisites || '', certificate_enabled: c.certificate_enabled, instructor_ids: c.instructor_ids || [], thumbnail: c.thumbnail || '' }); setEditing(c.course_id); setShowForm(true); };\n  const openNew = () => { setForm({ title: '', description: '', category: 'General', level: 'beginner', duration_weeks: 4, status: 'draft', visibility: 'public', prerequisites: '', certificate_enabled: false, instructor_ids: [], thumbnail: '' }); setEditing(null); setShowForm(true); };\n\n  const saveCourse = async () => {\n    try {\n      if (editing) { await API.put(`/api/courses/${editing}`, form); toast.success('Course updated'); }\n      else { await API.post('/api/courses', form); toast.success('Course created'); }\n      setShowForm(false); fetchCourses();\n    } catch (e) { toast.error(e.response?.data?.detail || 'Error saving course'); }\n  };\n\n  const deleteCourse = async (id) => {\n    try { await API.delete(`/api/courses/${id}`); toast.success('Course deleted'); fetchCourses(); } catch { toast.error('Error deleting'); }\n    setConfirmDelete(null);\n  };\n\n  const openBuilder = async (courseId) => {\n    try {\n      const res = await API.get(`/api/courses/${courseId}/modules`);\n      setModules(res.data);\n      setShowBuilder(courseId);\n    } catch { toast.error('Error loading modules'); }\n  };\n\n  const addModule = async () => {\n    if (!moduleForm?.title) return;\n    try {\n      await API.post(`/api/courses/${showBuilder}/modules`, moduleForm);\n      const res = await API.get(`/api/courses/${showBuilder}/modules`);\n      setModules(res.data);\n      setModuleForm(null);\n      toast.success('Module added');\n    } catch { toast.error('Error adding module'); }\n  };\n\n  const deleteModule = async (moduleId) => {\n    try {\n      await API.delete(`/api/modules/${moduleId}`);\n      setModules(modules.filter(m => m.module_id !== moduleId));\n      toast.success('Module deleted');\n    } catch { toast.error('Error deleting module'); }\n  };\n\n  const addLesson = async (moduleId) => {\n    if (!lessonForm?.title) return;\n    try {\n      await API.post(`/api/modules/${moduleId}/lessons`, lessonForm);\n      const res = await API.get(`/api/courses/${showBuilder}/modules`);\n      setModules(res.data);\n      setLessonForm(null);\n      toast.success('Lesson added');\n    } catch { toast.error('Error adding lesson'); }\n  };\n\n  const deleteLesson = async (lessonId) => {\n    try {\n      await API.delete(`/api/lessons/${lessonId}`);\n      const res = await API.get(`/api/courses/${showBuilder}/modules`);\n      setModules(res.data);\n      toast.success('Lesson deleted');\n    } catch { toast.error('Error deleting lesson'); }\n  };\n\n  if (loading) return <div className=\"flex items-center justify-center h-64\"><div className=\"animate-spin w-8 h-8 border-4 border-teal-500 border-t-transparent rounded-full\" /></div>;\n\n  return (\n    <div className=\"space-y-6 animate-fade-in\" data-testid=\"courses-page\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-[#1C1917]\" style={{ fontFamily: 'Plus Jakarta Sans' }}>Courses</h1>\n          <p className=\"text-sm text-[#57534E] mt-1\">{courses.length} courses total</p>\n        </div>\n        <button onClick={openNew} className=\"flex items-center gap-2 px-4 py-2 bg-[#0D9488] text-white rounded-lg text-sm font-medium hover:bg-[#0D9488]/90 active:scale-[0.98] transition-all\" data-testid=\"create-course-btn\"><Plus size={16} />New Course</button>\n      </div>\n\n      <div className=\"relative\">\n        <Search size={16} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-[#A8A29E]\" />\n        <input type=\"text\" value={search} onChange={e => setSearch(e.target.value)} placeholder=\"Search courses...\" className=\"w-full pl-9 pr-4 py-2.5 rounded-lg bg-white border border-[#E7E5E4] text-sm focus:border-[#14B8A6] outline-none\" data-testid=\"course-search\" />\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n        {courses.map(c => (\n          <div key={c.course_id} className=\"bg-white rounded-xl border border-[#E7E5E4] overflow-hidden hover:shadow-md hover:-translate-y-0.5 transition-all duration-300 group\" data-testid={`course-card-${c.course_id}`}>\n            <div className=\"h-36 bg-gradient-to-br from-indigo-100 to-purple-50 relative overflow-hidden\">\n              {c.thumbnail && <img src={c.thumbnail} alt=\"\" className=\"w-full h-full object-cover\" />}\n              <div className=\"absolute top-3 right-3 flex gap-1.5\">\n                <span className={`px-2 py-0.5 rounded-full text-xs font-medium ${c.status === 'published' ? 'bg-green-100 text-green-700' : 'bg-amber-100 text-amber-700'}`}>{c.status}</span>\n              </div>\n            </div>\n            <div className=\"p-4\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <span className=\"text-xs font-medium text-[#14B8A6] bg-[#F0FDFA] px-2 py-0.5 rounded\">{c.category}</span>\n                <span className=\"text-xs text-[#A8A29E] capitalize\">{c.level}</span>\n              </div>\n              <h3 className=\"font-semibold text-[#1C1917] mb-1 line-clamp-1\" style={{ fontFamily: 'Plus Jakarta Sans' }}>{c.title}</h3>\n              <p className=\"text-xs text-[#57534E] line-clamp-2 mb-3\">{c.description}</p>\n              <div className=\"flex items-center justify-between text-xs text-[#A8A29E]\">\n                <span>{c.module_count || 0} modules Â· {c.lesson_count || 0} lessons</span>\n                <span>{c.enrollment_count || 0} enrolled</span>\n              </div>\n              <div className=\"flex items-center gap-1.5 mt-3 pt-3 border-t border-[#F5F5F4]\">\n                <button onClick={() => openBuilder(c.course_id)} className=\"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 text-xs font-medium text-[#14B8A6] bg-[#F0FDFA] rounded-lg hover:bg-[#CCFBF1] transition-colors\" data-testid={`manage-course-${c.course_id}`}><Eye size={12} />Manage</button>\n                <button onClick={() => openEdit(c)} className=\"p-1.5 rounded-lg hover:bg-[#F5F5F4] text-[#57534E] transition-colors\" data-testid={`edit-course-${c.course_id}`}><Edit2 size={14} /></button>\n                {user?.role === 'super_admin' && <button onClick={() => setConfirmDelete(c)} className=\"p-1.5 rounded-lg hover:bg-red-50 text-red-400 transition-colors\" data-testid={`delete-course-${c.course_id}`}><Trash2 size={14} /></button>}\n              </div>\n            </div>\n          </div>\n        ))}\n        {courses.length === 0 && <div className=\"col-span-full text-center py-12 text-[#A8A29E]\">No courses found. Create your first course!</div>}\n      </div>\n\n      {/* Course Form Modal */}\n      {showForm && (\n        <div className=\"fixed inset-0 bg-black/30 z-50 flex items-center justify-center p-4\" onClick={() => setShowForm(false)}>\n          <div className=\"bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[85vh] overflow-auto\" onClick={e => e.stopPropagation()}>\n            <div className=\"flex items-center justify-between p-5 border-b border-[#E7E5E4]\">\n              <h3 className=\"text-lg font-semibold\" style={{ fontFamily: 'Plus Jakarta Sans' }}>{editing ? 'Edit Course' : 'Create Course'}</h3>\n              <button onClick={() => setShowForm(false)} className=\"p-1 rounded hover:bg-[#F5F5F4]\"><X size={18} /></button>\n            </div>\n            <div className=\"p-5 space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Title *</label>\n                <input value={form.title} onChange={e => setForm({...form, title: e.target.value})} className=\"w-full px-3 py-2 rounded-lg border border-[#E7E5E4] text-sm focus:border-[#14B8A6] outline-none\" data-testid=\"course-title-input\" />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Description</label>\n                <textarea value={form.description} onChange={e => setForm({...form, description: e.target.value})} rows={3} className=\"w-full px-3 py-2 rounded-lg border border-[#E7E5E4] text-sm focus:border-[#14B8A6] outline-none resize-none\" data-testid=\"course-description-input\" />\n              </div>\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Category</label>\n                  <select value={form.category} onChange={e => setForm({...form, category: e.target.value})} className=\"w-full px-3 py-2 rounded-lg border border-[#E7E5E4] text-sm focus:border-[#14B8A6] outline-none\" data-testid=\"course-category-select\">\n                    {CATEGORIES.map(c => <option key={c} value={c}>{c}</option>)}\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Level</label>\n                  <select value={form.level} onChange={e => setForm({...form, level: e.target.value})} className=\"w-full px-3 py-2 rounded-lg border border-[#E7E5E4] text-sm focus:border-[#14B8A6] outline-none capitalize\" data-testid=\"course-level-select\">\n                    {LEVELS.map(l => <option key={l} value={l}>{l}</option>)}\n                  </select>\n                </div>\n              </div>\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Status</label>\n                  <select value={form.status} onChange={e => setForm({...form, status: e.target.value})} className=\"w-full px-3 py-2 rounded-lg border border-[#E7E5E4] text-sm outline-none\" data-testid=\"course-status-select\">\n                    <option value=\"draft\">Draft</option>\n                    <option value=\"published\">Published</option>\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Duration (weeks)</label>\n                  <input type=\"number\" value={form.duration_weeks} onChange={e => setForm({...form, duration_weeks: parseInt(e.target.value) || 1})} className=\"w-full px-3 py-2 rounded-lg border border-[#E7E5E4] text-sm outline-none\" data-testid=\"course-duration-input\" />\n                </div>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Thumbnail URL</label>\n                <input value={form.thumbnail} onChange={e => setForm({...form, thumbnail: e.target.value})} className=\"w-full px-3 py-2 rounded-lg border border-[#E7E5E4] text-sm outline-none\" placeholder=\"https://...\" data-testid=\"course-thumbnail-input\" />\n              </div>\n              {instructors.length > 0 && (\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Instructors</label>\n                  <div className=\"space-y-1\">\n                    {instructors.map(inst => (\n                      <label key={inst.user_id} className=\"flex items-center gap-2 text-sm cursor-pointer\">\n                        <input type=\"checkbox\" checked={form.instructor_ids.includes(inst.user_id)} onChange={e => {\n                          setForm({...form, instructor_ids: e.target.checked ? [...form.instructor_ids, inst.user_id] : form.instructor_ids.filter(id => id !== inst.user_id)});\n                        }} className=\"rounded\" />\n                        {inst.name}\n                      </label>\n                    ))}\n                  </div>\n                </div>\n              )}\n              <label className=\"flex items-center gap-2 text-sm cursor-pointer\">\n                <input type=\"checkbox\" checked={form.certificate_enabled} onChange={e => setForm({...form, certificate_enabled: e.target.checked})} className=\"rounded\" />\n                Certificate enabled\n              </label>\n            </div>\n            <div className=\"flex justify-end gap-2 p-5 border-t border-[#E7E5E4]\">\n              <button onClick={() => setShowForm(false)} className=\"px-4 py-2 text-sm font-medium text-[#57534E] hover:bg-[#F5F5F4] rounded-lg transition-colors\">Cancel</button>\n              <button onClick={saveCourse} className=\"px-4 py-2 text-sm font-medium text-white bg-[#0D9488] rounded-lg hover:bg-[#0D9488]/90 active:scale-[0.98] transition-all\" data-testid=\"save-course-btn\">Save Course</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Course Builder (Modules & Lessons) */}\n      {showBuilder && (\n        <div className=\"fixed inset-0 bg-black/30 z-50 flex items-center justify-center p-4\" onClick={() => setShowBuilder(null)}>\n          <div className=\"bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[85vh] overflow-auto\" onClick={e => e.stopPropagation()}>\n            <div className=\"flex items-center justify-between p-5 border-b border-[#E7E5E4]\">\n              <h3 className=\"text-lg font-semibold\" style={{ fontFamily: 'Plus Jakarta Sans' }}>Course Builder</h3>\n              <button onClick={() => setShowBuilder(null)} className=\"p-1 rounded hover:bg-[#F5F5F4]\"><X size={18} /></button>\n            </div>\n            <div className=\"p-5 space-y-4\">\n              {modules.map((m, mi) => (\n                <div key={m.module_id} className=\"border border-[#E7E5E4] rounded-xl overflow-hidden\">\n                  <div className=\"flex items-center justify-between p-4 bg-[#F5F5F4]\">\n                    <div className=\"flex items-center gap-2\">\n                      <GripVertical size={16} className=\"text-[#A8A29E] cursor-grab\" />\n                      <span className=\"font-semibold text-sm\" style={{ fontFamily: 'Plus Jakarta Sans' }}>Module {mi + 1}: {m.title}</span>\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      <span className=\"text-xs text-[#A8A29E] mr-2\">{m.lessons?.length || 0} lessons</span>\n                      <button onClick={() => deleteModule(m.module_id)} className=\"p-1 rounded hover:bg-red-50 text-red-400\"><Trash2 size={14} /></button>\n                    </div>\n                  </div>\n                  <div className=\"p-3 space-y-2\">\n                    {m.lessons?.map((l, li) => (\n                      <div key={l.lesson_id} className=\"flex items-center justify-between px-3 py-2 bg-white rounded-lg border border-[#E7E5E4] hover:border-[#14B8A6]/30 transition-colors\">\n                        <div className=\"flex items-center gap-2\">\n                          <span className=\"text-xs text-[#A8A29E] w-5\">{li + 1}.</span>\n                          <span className=\"text-sm text-[#1C1917]\">{l.title}</span>\n                          <span className={`text-xs px-1.5 py-0.5 rounded ${l.type === 'video' ? 'bg-blue-50 text-blue-600' : l.type === 'text' ? 'bg-green-50 text-green-600' : 'bg-purple-50 text-purple-600'}`}>{l.type}</span>\n                        </div>\n                        <button onClick={() => deleteLesson(l.lesson_id)} className=\"p-1 rounded hover:bg-red-50 text-red-400\"><Trash2 size={12} /></button>\n                        <button onClick={() => setEditingLesson(l)} className=\"p-1 rounded hover:bg-[#F0FDFA] text-[#0D9488]\" data-testid={`edit-lesson-${l.lesson_id}`}><Edit2 size={12} /></button>\n                      </div>\n                    ))}\n                    {lessonForm?.moduleId === m.module_id ? (\n                      <div className=\"flex gap-2 mt-2\">\n                        <input value={lessonForm.title || ''} onChange={e => setLessonForm({...lessonForm, title: e.target.value})} placeholder=\"Lesson title\" className=\"flex-1 px-3 py-1.5 rounded-lg border border-[#E7E5E4] text-sm outline-none focus:border-[#14B8A6]\" data-testid=\"lesson-title-input\" />\n                        <select value={lessonForm.type || 'text'} onChange={e => setLessonForm({...lessonForm, type: e.target.value})} className=\"px-2 py-1.5 rounded-lg border border-[#E7E5E4] text-sm outline-none\">\n                          <option value=\"text\">Text</option>\n                          <option value=\"video\">Video</option>\n                          <option value=\"youtube\">YouTube</option>\n                        </select>\n                        <button onClick={() => addLesson(m.module_id)} className=\"px-3 py-1.5 bg-[#0D9488] text-white rounded-lg text-sm font-medium\" data-testid=\"save-lesson-btn\">Add</button>\n                        <button onClick={() => setLessonForm(null)} className=\"px-3 py-1.5 text-sm text-[#57534E] hover:bg-[#F5F5F4] rounded-lg\">Cancel</button>\n                      </div>\n                    ) : (\n                      <button onClick={() => setLessonForm({ moduleId: m.module_id, title: '', type: 'text', content: '' })} className=\"text-xs text-[#14B8A6] font-medium hover:underline mt-1\" data-testid={`add-lesson-to-${m.module_id}`}>+ Add Lesson</button>\n                    )}\n                  </div>\n                </div>\n              ))}\n\n              {moduleForm ? (\n                <div className=\"flex gap-2\">\n                  <input value={moduleForm.title || ''} onChange={e => setModuleForm({...moduleForm, title: e.target.value})} placeholder=\"Module title\" className=\"flex-1 px-3 py-2 rounded-lg border border-[#E7E5E4] text-sm outline-none focus:border-[#14B8A6]\" data-testid=\"module-title-input\" />\n                  <button onClick={addModule} className=\"px-4 py-2 bg-[#0D9488] text-white rounded-lg text-sm font-medium\" data-testid=\"save-module-btn\">Add Module</button>\n                  <button onClick={() => setModuleForm(null)} className=\"px-3 py-2 text-sm text-[#57534E] hover:bg-[#F5F5F4] rounded-lg\">Cancel</button>\n                </div>\n              ) : (\n                <button onClick={() => setModuleForm({ title: '', description: '' })} className=\"w-full py-3 border-2 border-dashed border-[#E7E5E4] rounded-xl text-sm font-medium text-[#14B8A6] hover:border-[#14B8A6] hover:bg-[#F0FDFA] transition-all\" data-testid=\"add-module-btn\">+ Add Module</button>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Lesson Content Editor */}\n      {editingLesson && (\n        <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-4\" onClick={() => setEditingLesson(null)}>\n          <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[85vh] overflow-auto\" onClick={e => e.stopPropagation()}>\n            <div className=\"flex items-center justify-between p-5 border-b border-[#E2E8F0]\">\n              <h3 className=\"text-lg font-bold\">Edit Lesson Content</h3>\n              <button onClick={() => setEditingLesson(null)} className=\"p-1 rounded-lg hover:bg-[#F8FAFC]\"><X size={16} /></button>\n            </div>\n            <div className=\"p-5 space-y-4\">\n              <div><label className=\"block text-[12px] font-semibold text-[#334155] mb-1\">Title</label><input value={editingLesson.title || ''} onChange={e => setEditingLesson({...editingLesson, title: e.target.value})} className=\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\" /></div>\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div><label className=\"block text-[12px] font-semibold text-[#334155] mb-1\">Type</label><select value={editingLesson.type || 'text'} onChange={e => setEditingLesson({...editingLesson, type: e.target.value})} className=\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none\"><option value=\"text\">Text</option><option value=\"video\">Video</option><option value=\"youtube\">YouTube</option><option value=\"mixed\">Mixed</option></select></div>\n                <div><label className=\"block text-[12px] font-semibold text-[#334155] mb-1\">Status</label><select value={editingLesson.status || 'draft'} onChange={e => setEditingLesson({...editingLesson, status: e.target.value})} className=\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none\"><option value=\"draft\">Draft</option><option value=\"published\">Published</option></select></div>\n              </div>\n              {editingLesson.type === 'youtube' && <div><label className=\"block text-[12px] font-semibold text-[#334155] mb-1\">YouTube URL</label><input value={editingLesson.youtube_url || ''} onChange={e => setEditingLesson({...editingLesson, youtube_url: e.target.value})} className=\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none\" placeholder=\"https://youtube.com/watch?v=...\" /></div>}\n              <div>\n                <label className=\"block text-[12px] font-semibold text-[#334155] mb-1\">Content</label>\n                <RichTextEditor value={editingLesson.content} onChange={val => setEditingLesson({...editingLesson, content: val})} minHeight={250} />\n              </div>\n            </div>\n            <div className=\"flex justify-end gap-2 p-5 border-t border-[#E2E8F0]\">\n              <button onClick={() => setEditingLesson(null)} className=\"px-4 py-2 text-sm font-bold text-[#64748B] rounded-xl\" style={{ fontFamily: 'Space Mono' }}>Cancel</button>\n              <button onClick={async () => {\n                try {\n                  await API.put(`/api/lessons/${editingLesson.lesson_id}`, editingLesson);\n                  toast.success('Lesson saved');\n                  const res = await API.get(`/api/courses/${showBuilder}/modules`);\n                  setModules(res.data);\n                  setEditingLesson(null);\n                } catch { toast.error('Error saving'); }\n              }} className=\"px-6 py-2 text-sm font-bold text-white bg-gradient-to-r from-[#0D9488] to-[#14B8A6] rounded-xl\" style={{ fontFamily: 'Space Mono' }} data-testid=\"save-lesson-content-btn\">Save Lesson</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Confirm Delete */}\n      <ConfirmModal\n        isOpen={!!confirmDelete}\n        onClose={() => setConfirmDelete(null)}\n        onConfirm={() => deleteCourse(confirmDelete?.course_id)}\n        title=\"Delete Course\"\n        message={`Are you sure you want to delete \"${confirmDelete?.title}\"? This will permanently remove all modules and lessons within this course.`}\n        confirmLabel=\"Delete Course\"\n        variant=\"danger\"\n      />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}