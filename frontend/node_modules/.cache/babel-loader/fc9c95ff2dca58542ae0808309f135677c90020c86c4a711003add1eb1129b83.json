{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import API from'../../api';import{Plus,Search,Edit2,Trash2,X,ShieldBan,ShieldCheck,Eye,ChevronDown}from'lucide-react';import ConfirmModal from'../../components/ConfirmModal';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const calcAge=dob=>{if(!dob)return'';const d=new Date(dob);const now=new Date();let age=now.getFullYear()-d.getFullYear();if(now.getMonth()<d.getMonth()||now.getMonth()===d.getMonth()&&now.getDate()<d.getDate())age--;return age;};export default function Users(_ref){var _viewUser$name;let{role:filterRole}=_ref;const[users,setUsers]=useState([]);const[courses,setCourses]=useState([]);const[loading,setLoading]=useState(true);const[search,setSearch]=useState('');const[showForm,setShowForm]=useState(false);const[editing,setEditing]=useState(null);const[viewUser,setViewUser]=useState(null);const[confirmAction,setConfirmAction]=useState(null);const[form,setForm]=useState({});// Lock body scroll when any modal is open\nuseEffect(()=>{if(showForm||viewUser){document.body.style.overflow='hidden';return()=>{document.body.style.overflow='';};}},[showForm,viewUser]);const isStudent=filterRole==='student';const label=isStudent?'Students':'Instructors';const emptyForm=_objectSpread(_objectSpread({first_name:'',middle_name:'',last_name:'',email:'',password:'',role:filterRole||'student',bio:'',dob:'',gender:'',phone:''},isStudent?{school_name:'',class_name:'',guardian_name:''}:{}),{},{course_ids:[]});const fetchData=()=>{Promise.all([API.get('/api/users',{params:{role:filterRole,search:search||undefined}}),API.get('/api/courses')]).then(_ref2=>{let[u,c]=_ref2;setUsers(u.data);setCourses(c.data);}).catch(()=>{}).finally(()=>setLoading(false));};useEffect(()=>{fetchData();},[search,filterRole]);const openNew=()=>{setForm(emptyForm);setEditing(null);setShowForm(true);};const openEdit=async u=>{var _u$name,_u$name2;// Fetch enrolled courses for this user\nlet enrolledCourseIds=[];try{const res=await API.get(\"/api/users/\".concat(u.user_id));enrolledCourseIds=(res.data.enrolled_courses||[]).map(e=>e.course_id);}catch(_unused){}setForm(_objectSpread(_objectSpread({first_name:u.first_name||((_u$name=u.name)===null||_u$name===void 0?void 0:_u$name.split(' ')[0])||'',middle_name:u.middle_name||'',last_name:u.last_name||((_u$name2=u.name)===null||_u$name2===void 0?void 0:_u$name2.split(' ').slice(1).join(' '))||'',email:u.email,password:'',role:u.role,bio:u.bio||'',dob:u.dob||'',gender:u.gender||'',phone:u.phone||''},isStudent?{school_name:u.school_name||'',class_name:u.class_name||'',guardian_name:u.guardian_name||''}:{}),{},{course_ids:enrolledCourseIds}));setEditing(u.user_id);setShowForm(true);};const saveUser=async()=>{try{const data=_objectSpread(_objectSpread({},form),{},{name:\"\".concat(form.first_name,\" \").concat(form.middle_name,\" \").concat(form.last_name).replace(/\\s+/g,' ').trim()});if(!data.password)delete data.password;const courseIds=data.course_ids||[];delete data.course_ids;let userId=editing;if(editing){await API.put(\"/api/users/\".concat(editing),data);toast.success('User updated');}else{const res=await API.post('/api/users',data);userId=res.data.user_id;toast.success(\"\".concat(isStudent?'Student':'Instructor',\" created with default password: 123456\"));}// Sync enrollments\nif(isStudent&&courseIds.length>=0){await API.post('/api/admin/students/enroll',{student_id:userId,course_ids:courseIds});}setShowForm(false);fetchData();}catch(e){var _e$response,_e$response$data;toast.error(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.detail)||'Error saving');}};const handleSuspend=async userId=>{try{await API.put(\"/api/users/\".concat(userId,\"/suspend\"));toast.success('Account suspended');fetchData();}catch(_unused2){toast.error('Error');}setConfirmAction(null);};const handleReactivate=async userId=>{try{await API.put(\"/api/users/\".concat(userId,\"/reactivate\"));toast.success('Account reactivated');fetchData();}catch(_unused3){toast.error('Error');}};const handleDelete=async userId=>{try{await API.delete(\"/api/users/\".concat(userId));toast.success('User deleted');fetchData();}catch(_unused4){toast.error('Error');}setConfirmAction(null);};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full max-w-2xl space-y-4\",children:[1,2,3].map(i=>/*#__PURE__*/_jsx(\"div\",{className:\"skeleton h-16 w-full\"},i))})});return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6 animate-fade-up\",\"data-testid\":\"users-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between flex-wrap gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-[#0F172A]\",children:label}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-[#64748B] mt-1\",children:[users.length,\" \",label.toLowerCase(),\" registered\"]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:openNew,className:\"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-[#0D9488] to-[#14B8A6] text-white rounded-xl text-sm font-bold active:scale-[0.97] transition-all shadow-lg shadow-teal-500/20\",style:{fontFamily:'Space Mono'},\"data-testid\":\"create-user-btn\",children:[/*#__PURE__*/_jsx(Plus,{size:16}),\"Add \",isStudent?'Student':'Instructor']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Search,{size:15,className:\"absolute left-3.5 top-1/2 -translate-y-1/2 text-[#94A3B8]\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:search,onChange:e=>setSearch(e.target.value),placeholder:\"Search \".concat(label.toLowerCase(),\"...\"),className:\"w-full pl-10 pr-4 py-2.5 rounded-xl bg-white border border-[#E2E8F0] text-sm focus:border-[#0D9488] outline-none transition-all\",\"data-testid\":\"user-search\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-2xl border border-[#E2E8F0] overflow-hidden shadow-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-[#E2E8F0] bg-[#F8FAFC]\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-3 px-4 text-[11px] font-bold text-[#94A3B8] uppercase tracking-wider\",style:{fontFamily:'Space Mono'},children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-3 px-4 text-[11px] font-bold text-[#94A3B8] uppercase tracking-wider\",style:{fontFamily:'Space Mono'},children:\"Email\"}),isStudent&&/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-3 px-4 text-[11px] font-bold text-[#94A3B8] uppercase tracking-wider\",style:{fontFamily:'Space Mono'},children:\"School\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-3 px-4 text-[11px] font-bold text-[#94A3B8] uppercase tracking-wider\",style:{fontFamily:'Space Mono'},children:\"Age\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-3 px-4 text-[11px] font-bold text-[#94A3B8] uppercase tracking-wider\",style:{fontFamily:'Space Mono'},children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-3 px-4 text-[11px] font-bold text-[#94A3B8] uppercase tracking-wider\",style:{fontFamily:'Space Mono'},children:\"Joined\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-right py-3 px-4 text-[11px] font-bold text-[#94A3B8] uppercase tracking-wider\",style:{fontFamily:'Space Mono'},children:\"Actions\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[users.map(u=>{var _u$name3;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-[#F1F5F9] hover:bg-[#F8FAFC] transition-colors\",\"data-testid\":\"user-row-\".concat(u.user_id),children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-9 h-9 rounded-xl bg-gradient-to-br from-[#F0FDFA] to-[#CCFBF1] flex items-center justify-center text-[#0D9488] font-bold text-xs\",children:(_u$name3=u.name)===null||_u$name3===void 0?void 0:_u$name3.charAt(0)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-[#0F172A]\",children:u.name}),u.phone&&/*#__PURE__*/_jsx(\"p\",{className:\"text-[11px] text-[#94A3B8]\",children:u.phone})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4 text-[#64748B]\",children:u.email}),isStudent&&/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4 text-[#64748B] text-xs\",children:u.school_name||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4 text-[#64748B]\",children:u.dob?calcAge(u.dob):'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] font-bold \".concat(u.status==='active'?'bg-emerald-50 text-emerald-600':'bg-red-50 text-red-600'),style:{fontFamily:'Space Mono'},children:u.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4 text-[#94A3B8] text-xs\",children:new Date(u.created_at).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{className:\"py-3 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{try{const res=await API.get(\"/api/users/\".concat(u.user_id));setViewUser(res.data);}catch(_unused5){setViewUser(u);}},className:\"p-1.5 rounded-lg hover:bg-[#F8FAFC] text-[#94A3B8] hover:text-[#0D9488] transition-colors\",\"data-testid\":\"view-user-\".concat(u.user_id),children:/*#__PURE__*/_jsx(Eye,{size:14})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openEdit(u),className:\"p-1.5 rounded-lg hover:bg-[#F8FAFC] text-[#94A3B8] hover:text-[#0F172A] transition-colors\",\"data-testid\":\"edit-user-\".concat(u.user_id),children:/*#__PURE__*/_jsx(Edit2,{size:14})}),u.status==='active'?/*#__PURE__*/_jsx(\"button\",{onClick:()=>setConfirmAction({type:'suspend',userId:u.user_id,name:u.name}),className:\"p-1.5 rounded-lg hover:bg-amber-50 text-[#94A3B8] hover:text-amber-500 transition-colors\",\"data-testid\":\"suspend-user-\".concat(u.user_id),children:/*#__PURE__*/_jsx(ShieldBan,{size:14})}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleReactivate(u.user_id),className:\"p-1.5 rounded-lg hover:bg-emerald-50 text-[#94A3B8] hover:text-emerald-500 transition-colors\",\"data-testid\":\"reactivate-user-\".concat(u.user_id),children:/*#__PURE__*/_jsx(ShieldCheck,{size:14})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setConfirmAction({type:'delete',userId:u.user_id,name:u.name}),className:\"p-1.5 rounded-lg hover:bg-red-50 text-[#94A3B8] hover:text-[#EF4444] transition-colors\",\"data-testid\":\"delete-user-\".concat(u.user_id),children:/*#__PURE__*/_jsx(Trash2,{size:14})})]})})]},u.user_id);}),users.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{colSpan:isStudent?7:6,className:\"text-center py-12 text-[#94A3B8]\",children:[\"No \",label.toLowerCase(),\" found\"]})})]})]})})}),showForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black/40 backdrop-blur-sm\",onClick:()=>setShowForm(false)}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[85vh] overflow-auto animate-fade-up\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-5 border-b border-[#E2E8F0] sticky top-0 bg-white z-10 rounded-t-2xl\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-bold text-[#0F172A]\",children:[editing?'Edit':'Add',\" \",isStudent?'Student':'Instructor']}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(false),className:\"p-1.5 rounded-lg hover:bg-[#F8FAFC]\",children:/*#__PURE__*/_jsx(X,{size:16,className:\"text-[#64748B]\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-5 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-[12px] font-semibold text-[#334155] mb-1\",children:\"First Name *\"}),/*#__PURE__*/_jsx(\"input\",{value:form.first_name,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{first_name:e.target.value})),className:\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\",\"data-testid\":\"user-first-name\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-[12px] font-semibold text-[#334155] mb-1\",children:\"Middle Name\"}),/*#__PURE__*/_jsx(\"input\",{value:form.middle_name,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{middle_name:e.target.value})),className:\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-[12px] font-semibold text-[#334155] mb-1\",children:\"Last Name *\"}),/*#__PURE__*/_jsx(\"input\",{value:form.last_name,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{last_name:e.target.value})),className:\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\",\"data-testid\":\"user-last-name\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-[12px] font-semibold text-[#334155] mb-1\",children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:form.email,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{email:e.target.value})),className:\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\",\"data-testid\":\"user-email-input\"})]}),!editing&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-[12px] font-semibold text-[#334155] mb-1\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{value:form.password,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{password:e.target.value})),placeholder:\"Default: 123456\",className:\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\",\"data-testid\":\"user-password-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-[12px] font-semibold text-[#334155] mb-1\",children:\"Date of Birth\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:form.dob,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{dob:e.target.value})),className:\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\",\"data-testid\":\"user-dob\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-[12px] font-semibold text-[#334155] mb-1\",children:\"Gender\"}),/*#__PURE__*/_jsxs(\"select\",{value:form.gender,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{gender:e.target.value})),className:\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\",\"data-testid\":\"user-gender\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{value:\"male\",children:\"Male\"}),/*#__PURE__*/_jsx(\"option\",{value:\"female\",children:\"Female\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"Other\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-[12px] font-semibold text-[#334155] mb-1\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"input\",{value:form.phone,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{phone:e.target.value})),className:\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\",\"data-testid\":\"user-phone\"})]}),isStudent&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-[12px] font-semibold text-[#334155] mb-1\",children:\"School Name\"}),/*#__PURE__*/_jsx(\"input\",{value:form.school_name,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{school_name:e.target.value})),className:\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\",\"data-testid\":\"user-school\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-[12px] font-semibold text-[#334155] mb-1\",children:\"Class Name\"}),/*#__PURE__*/_jsx(\"input\",{value:form.class_name,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{class_name:e.target.value})),className:\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\",\"data-testid\":\"user-class\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-[12px] font-semibold text-[#334155] mb-1\",children:\"Guardian Name\"}),/*#__PURE__*/_jsx(\"input\",{value:form.guardian_name,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{guardian_name:e.target.value})),className:\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\",\"data-testid\":\"user-guardian\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-[12px] font-semibold text-[#334155] mb-1\",children:\"Assign Courses\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1.5 max-h-32 overflow-auto p-2 border border-[#E2E8F0] rounded-xl\",children:courses.filter(c=>c.status==='published').map(c=>{var _form$course_ids;return/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 text-sm cursor-pointer hover:bg-[#F8FAFC] p-1 rounded-lg\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:(_form$course_ids=form.course_ids)===null||_form$course_ids===void 0?void 0:_form$course_ids.includes(c.course_id),onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{course_ids:e.target.checked?[...(form.course_ids||[]),c.course_id]:(form.course_ids||[]).filter(id=>id!==c.course_id)})),className:\"rounded text-[#0D9488]\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[#334155]\",children:c.title})]},c.course_id);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-[12px] font-semibold text-[#334155] mb-1\",children:\"Bio\"}),/*#__PURE__*/_jsx(\"textarea\",{value:form.bio,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{bio:e.target.value})),rows:2,className:\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488] resize-none\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-2 p-5 border-t border-[#E2E8F0] sticky bottom-0 bg-white rounded-b-2xl\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(false),className:\"px-4 py-2.5 text-sm font-bold text-[#64748B] hover:bg-[#F8FAFC] rounded-xl\",style:{fontFamily:'Space Mono'},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:saveUser,className:\"px-6 py-2.5 text-sm font-bold text-white bg-gradient-to-r from-[#0D9488] to-[#14B8A6] rounded-xl active:scale-[0.97] transition-all\",style:{fontFamily:'Space Mono'},\"data-testid\":\"save-user-btn\",children:\"Save\"})]})]})]}),viewUser&&/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black/40 backdrop-blur-sm\",onClick:()=>setViewUser(null)}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[85vh] overflow-auto animate-fade-up\",\"data-testid\":\"user-detail-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-5 border-b border-[#E2E8F0] sticky top-0 bg-white z-10 rounded-t-2xl\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-[#0F172A]\",children:\"Profile Details\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setViewUser(null),className:\"p-1.5 rounded-lg hover:bg-[#F8FAFC]\",children:/*#__PURE__*/_jsx(X,{size:16})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 mb-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 rounded-2xl bg-gradient-to-br from-[#F0FDFA] to-[#CCFBF1] flex items-center justify-center text-[#0D9488] font-bold text-2xl\",children:(_viewUser$name=viewUser.name)===null||_viewUser$name===void 0?void 0:_viewUser$name.charAt(0)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-[#0F172A]\",children:viewUser.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-[#64748B]\",children:viewUser.email}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center mt-1 px-2 py-0.5 rounded-full text-[10px] font-bold \".concat(viewUser.status==='active'?'bg-emerald-50 text-emerald-600':'bg-red-50 text-red-600'),style:{fontFamily:'Space Mono'},children:viewUser.status})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-3 text-sm\",children:[['Gender',viewUser.gender||'-'],['Age',viewUser.dob?calcAge(viewUser.dob):'-'],['Phone',viewUser.phone||'-'],['Points',viewUser.points||0],...(isStudent?[['School',viewUser.school_name||'-'],['Class',viewUser.class_name||'-'],['Guardian',viewUser.guardian_name||'-']]:[]),['Joined',new Date(viewUser.created_at).toLocaleDateString()]].map(_ref3=>{let[k,v]=_ref3;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-2.5 bg-[#F8FAFC] rounded-xl\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] font-bold text-[#94A3B8] uppercase tracking-wider\",style:{fontFamily:'Space Mono'},children:k}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[#0F172A] font-medium mt-0.5\",children:v})]},k);})}),viewUser.bio&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 p-3 bg-[#F8FAFC] rounded-xl\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] font-bold text-[#94A3B8] uppercase mb-1\",style:{fontFamily:'Space Mono'},children:\"Bio\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-[#334155]\",children:viewUser.bio})]}),isStudent&&viewUser.enrolled_courses&&viewUser.enrolled_courses.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",\"data-testid\":\"user-enrolled-courses\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] font-bold text-[#94A3B8] uppercase tracking-wider mb-2\",style:{fontFamily:'Space Mono'},children:\"Enrolled Courses\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:viewUser.enrolled_courses.map(ec=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-2.5 bg-[#F0FDFA] rounded-xl border border-[#CCFBF1]\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-[#0F172A]\",children:ec.course_title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[10px] text-[#64748B]\",children:[\"Enrolled \",new Date(ec.enrolled_at).toLocaleDateString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 bg-[#E2E8F0] rounded-full h-1.5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full bg-[#0D9488] rounded-full\",style:{width:\"\".concat(ec.progress,\"%\")}})}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-[10px] font-bold text-[#0D9488]\",style:{fontFamily:'Space Mono'},children:[ec.progress,\"%\"]})]})]},ec.enrollment_id))})]})]})]})]}),/*#__PURE__*/_jsx(ConfirmModal,{isOpen:(confirmAction===null||confirmAction===void 0?void 0:confirmAction.type)==='delete',onClose:()=>setConfirmAction(null),onConfirm:()=>handleDelete(confirmAction===null||confirmAction===void 0?void 0:confirmAction.userId),title:\"Delete User\",message:\"Are you sure you want to permanently delete \".concat(confirmAction===null||confirmAction===void 0?void 0:confirmAction.name,\"? This action cannot be undone.\"),confirmLabel:\"Delete\",variant:\"danger\"}),/*#__PURE__*/_jsx(ConfirmModal,{isOpen:(confirmAction===null||confirmAction===void 0?void 0:confirmAction.type)==='suspend',onClose:()=>setConfirmAction(null),onConfirm:()=>handleSuspend(confirmAction===null||confirmAction===void 0?void 0:confirmAction.userId),title:\"Suspend Account\",message:\"Are you sure you want to suspend \".concat(confirmAction===null||confirmAction===void 0?void 0:confirmAction.name,\"'s account? They will not be able to access the platform.\"),confirmLabel:\"Suspend\",variant:\"warning\"})]});}","map":{"version":3,"names":["React","useState","useEffect","API","Plus","Search","Edit2","Trash2","X","ShieldBan","ShieldCheck","Eye","ChevronDown","ConfirmModal","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","calcAge","dob","d","Date","now","age","getFullYear","getMonth","getDate","Users","_ref","_viewUser$name","role","filterRole","users","setUsers","courses","setCourses","loading","setLoading","search","setSearch","showForm","setShowForm","editing","setEditing","viewUser","setViewUser","confirmAction","setConfirmAction","form","setForm","document","body","style","overflow","isStudent","label","emptyForm","_objectSpread","first_name","middle_name","last_name","email","password","bio","gender","phone","school_name","class_name","guardian_name","course_ids","fetchData","Promise","all","get","params","undefined","then","_ref2","u","c","data","catch","finally","openNew","openEdit","_u$name","_u$name2","enrolledCourseIds","res","concat","user_id","enrolled_courses","map","e","course_id","_unused","name","split","slice","join","saveUser","replace","trim","courseIds","userId","put","success","post","length","student_id","_e$response","_e$response$data","error","response","detail","handleSuspend","_unused2","handleReactivate","_unused3","handleDelete","delete","_unused4","className","children","i","toLowerCase","onClick","fontFamily","size","type","value","onChange","target","placeholder","_u$name3","charAt","status","created_at","toLocaleDateString","_unused5","colSpan","stopPropagation","filter","_form$course_ids","checked","includes","id","title","rows","points","_ref3","k","v","ec","course_title","enrolled_at","width","progress","enrollment_id","isOpen","onClose","onConfirm","message","confirmLabel","variant"],"sources":["/app/frontend/src/pages/admin/Users.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport API from '../../api';\nimport { Plus, Search, Edit2, Trash2, X, ShieldBan, ShieldCheck, Eye, ChevronDown } from 'lucide-react';\nimport ConfirmModal from '../../components/ConfirmModal';\nimport toast from 'react-hot-toast';\n\nconst calcAge = (dob) => {\n  if (!dob) return '';\n  const d = new Date(dob);\n  const now = new Date();\n  let age = now.getFullYear() - d.getFullYear();\n  if (now.getMonth() < d.getMonth() || (now.getMonth() === d.getMonth() && now.getDate() < d.getDate())) age--;\n  return age;\n};\n\nexport default function Users({ role: filterRole }) {\n  const [users, setUsers] = useState([]);\n  const [courses, setCourses] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [search, setSearch] = useState('');\n  const [showForm, setShowForm] = useState(false);\n  const [editing, setEditing] = useState(null);\n  const [viewUser, setViewUser] = useState(null);\n  const [confirmAction, setConfirmAction] = useState(null);\n  const [form, setForm] = useState({});\n\n  // Lock body scroll when any modal is open\n  useEffect(() => {\n    if (showForm || viewUser) {\n      document.body.style.overflow = 'hidden';\n      return () => { document.body.style.overflow = ''; };\n    }\n  }, [showForm, viewUser]);\n\n  const isStudent = filterRole === 'student';\n  const label = isStudent ? 'Students' : 'Instructors';\n  const emptyForm = {\n    first_name: '', middle_name: '', last_name: '', email: '', password: '',\n    role: filterRole || 'student', bio: '', dob: '', gender: '', phone: '',\n    ...(isStudent ? { school_name: '', class_name: '', guardian_name: '' } : {}),\n    course_ids: []\n  };\n\n  const fetchData = () => {\n    Promise.all([\n      API.get('/api/users', { params: { role: filterRole, search: search || undefined } }),\n      API.get('/api/courses')\n    ]).then(([u, c]) => { setUsers(u.data); setCourses(c.data); }).catch(() => {}).finally(() => setLoading(false));\n  };\n\n  useEffect(() => { fetchData(); }, [search, filterRole]);\n\n  const openNew = () => { setForm(emptyForm); setEditing(null); setShowForm(true); };\n  const openEdit = async (u) => {\n    // Fetch enrolled courses for this user\n    let enrolledCourseIds = [];\n    try {\n      const res = await API.get(`/api/users/${u.user_id}`);\n      enrolledCourseIds = (res.data.enrolled_courses || []).map(e => e.course_id);\n    } catch {}\n    setForm({\n      first_name: u.first_name || u.name?.split(' ')[0] || '', middle_name: u.middle_name || '',\n      last_name: u.last_name || u.name?.split(' ').slice(1).join(' ') || '',\n      email: u.email, password: '', role: u.role, bio: u.bio || '', dob: u.dob || '',\n      gender: u.gender || '', phone: u.phone || '',\n      ...(isStudent ? { school_name: u.school_name || '', class_name: u.class_name || '', guardian_name: u.guardian_name || '' } : {}),\n      course_ids: enrolledCourseIds\n    });\n    setEditing(u.user_id);\n    setShowForm(true);\n  };\n\n  const saveUser = async () => {\n    try {\n      const data = { ...form, name: `${form.first_name} ${form.middle_name} ${form.last_name}`.replace(/\\s+/g, ' ').trim() };\n      if (!data.password) delete data.password;\n      const courseIds = data.course_ids || [];\n      delete data.course_ids;\n      let userId = editing;\n      if (editing) {\n        await API.put(`/api/users/${editing}`, data);\n        toast.success('User updated');\n      } else {\n        const res = await API.post('/api/users', data);\n        userId = res.data.user_id;\n        toast.success(`${isStudent ? 'Student' : 'Instructor'} created with default password: 123456`);\n      }\n      // Sync enrollments\n      if (isStudent && courseIds.length >= 0) {\n        await API.post('/api/admin/students/enroll', { student_id: userId, course_ids: courseIds });\n      }\n      setShowForm(false); fetchData();\n    } catch (e) { toast.error(e.response?.data?.detail || 'Error saving'); }\n  };\n\n  const handleSuspend = async (userId) => {\n    try { await API.put(`/api/users/${userId}/suspend`); toast.success('Account suspended'); fetchData(); } catch { toast.error('Error'); }\n    setConfirmAction(null);\n  };\n\n  const handleReactivate = async (userId) => {\n    try { await API.put(`/api/users/${userId}/reactivate`); toast.success('Account reactivated'); fetchData(); } catch { toast.error('Error'); }\n  };\n\n  const handleDelete = async (userId) => {\n    try { await API.delete(`/api/users/${userId}`); toast.success('User deleted'); fetchData(); } catch { toast.error('Error'); }\n    setConfirmAction(null);\n  };\n\n  if (loading) return <div className=\"flex items-center justify-center h-64\"><div className=\"w-full max-w-2xl space-y-4\">{[1,2,3].map(i => <div key={i} className=\"skeleton h-16 w-full\" />)}</div></div>;\n\n  return (\n    <div className=\"space-y-6 animate-fade-up\" data-testid=\"users-page\">\n      <div className=\"flex items-center justify-between flex-wrap gap-3\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-[#0F172A]\">{label}</h1>\n          <p className=\"text-sm text-[#64748B] mt-1\">{users.length} {label.toLowerCase()} registered</p>\n        </div>\n        <button onClick={openNew} className=\"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-[#0D9488] to-[#14B8A6] text-white rounded-xl text-sm font-bold active:scale-[0.97] transition-all shadow-lg shadow-teal-500/20\" style={{ fontFamily: 'Space Mono' }} data-testid=\"create-user-btn\">\n          <Plus size={16} />Add {isStudent ? 'Student' : 'Instructor'}\n        </button>\n      </div>\n\n      <div className=\"relative\">\n        <Search size={15} className=\"absolute left-3.5 top-1/2 -translate-y-1/2 text-[#94A3B8]\" />\n        <input type=\"text\" value={search} onChange={e => setSearch(e.target.value)} placeholder={`Search ${label.toLowerCase()}...`} className=\"w-full pl-10 pr-4 py-2.5 rounded-xl bg-white border border-[#E2E8F0] text-sm focus:border-[#0D9488] outline-none transition-all\" data-testid=\"user-search\" />\n      </div>\n\n      <div className=\"bg-white rounded-2xl border border-[#E2E8F0] overflow-hidden shadow-sm\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full text-sm\">\n            <thead>\n              <tr className=\"border-b border-[#E2E8F0] bg-[#F8FAFC]\">\n                <th className=\"text-left py-3 px-4 text-[11px] font-bold text-[#94A3B8] uppercase tracking-wider\" style={{ fontFamily: 'Space Mono' }}>Name</th>\n                <th className=\"text-left py-3 px-4 text-[11px] font-bold text-[#94A3B8] uppercase tracking-wider\" style={{ fontFamily: 'Space Mono' }}>Email</th>\n                {isStudent && <th className=\"text-left py-3 px-4 text-[11px] font-bold text-[#94A3B8] uppercase tracking-wider\" style={{ fontFamily: 'Space Mono' }}>School</th>}\n                <th className=\"text-left py-3 px-4 text-[11px] font-bold text-[#94A3B8] uppercase tracking-wider\" style={{ fontFamily: 'Space Mono' }}>Age</th>\n                <th className=\"text-left py-3 px-4 text-[11px] font-bold text-[#94A3B8] uppercase tracking-wider\" style={{ fontFamily: 'Space Mono' }}>Status</th>\n                <th className=\"text-left py-3 px-4 text-[11px] font-bold text-[#94A3B8] uppercase tracking-wider\" style={{ fontFamily: 'Space Mono' }}>Joined</th>\n                <th className=\"text-right py-3 px-4 text-[11px] font-bold text-[#94A3B8] uppercase tracking-wider\" style={{ fontFamily: 'Space Mono' }}>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {users.map(u => (\n                <tr key={u.user_id} className=\"border-b border-[#F1F5F9] hover:bg-[#F8FAFC] transition-colors\" data-testid={`user-row-${u.user_id}`}>\n                  <td className=\"py-3 px-4\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-9 h-9 rounded-xl bg-gradient-to-br from-[#F0FDFA] to-[#CCFBF1] flex items-center justify-center text-[#0D9488] font-bold text-xs\">{u.name?.charAt(0)}</div>\n                      <div>\n                        <p className=\"font-semibold text-[#0F172A]\">{u.name}</p>\n                        {u.phone && <p className=\"text-[11px] text-[#94A3B8]\">{u.phone}</p>}\n                      </div>\n                    </div>\n                  </td>\n                  <td className=\"py-3 px-4 text-[#64748B]\">{u.email}</td>\n                  {isStudent && <td className=\"py-3 px-4 text-[#64748B] text-xs\">{u.school_name || '-'}</td>}\n                  <td className=\"py-3 px-4 text-[#64748B]\">{u.dob ? calcAge(u.dob) : '-'}</td>\n                  <td className=\"py-3 px-4\">\n                    <span className={`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] font-bold ${u.status === 'active' ? 'bg-emerald-50 text-emerald-600' : 'bg-red-50 text-red-600'}`} style={{ fontFamily: 'Space Mono' }}>{u.status}</span>\n                  </td>\n                  <td className=\"py-3 px-4 text-[#94A3B8] text-xs\">{new Date(u.created_at).toLocaleDateString()}</td>\n                  <td className=\"py-3 px-4\">\n                    <div className=\"flex items-center justify-end gap-1\">\n                      <button onClick={async () => { try { const res = await API.get(`/api/users/${u.user_id}`); setViewUser(res.data); } catch { setViewUser(u); } }} className=\"p-1.5 rounded-lg hover:bg-[#F8FAFC] text-[#94A3B8] hover:text-[#0D9488] transition-colors\" data-testid={`view-user-${u.user_id}`}><Eye size={14} /></button>\n                      <button onClick={() => openEdit(u)} className=\"p-1.5 rounded-lg hover:bg-[#F8FAFC] text-[#94A3B8] hover:text-[#0F172A] transition-colors\" data-testid={`edit-user-${u.user_id}`}><Edit2 size={14} /></button>\n                      {u.status === 'active' ? (\n                        <button onClick={() => setConfirmAction({ type: 'suspend', userId: u.user_id, name: u.name })} className=\"p-1.5 rounded-lg hover:bg-amber-50 text-[#94A3B8] hover:text-amber-500 transition-colors\" data-testid={`suspend-user-${u.user_id}`}><ShieldBan size={14} /></button>\n                      ) : (\n                        <button onClick={() => handleReactivate(u.user_id)} className=\"p-1.5 rounded-lg hover:bg-emerald-50 text-[#94A3B8] hover:text-emerald-500 transition-colors\" data-testid={`reactivate-user-${u.user_id}`}><ShieldCheck size={14} /></button>\n                      )}\n                      <button onClick={() => setConfirmAction({ type: 'delete', userId: u.user_id, name: u.name })} className=\"p-1.5 rounded-lg hover:bg-red-50 text-[#94A3B8] hover:text-[#EF4444] transition-colors\" data-testid={`delete-user-${u.user_id}`}><Trash2 size={14} /></button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n              {users.length === 0 && <tr><td colSpan={isStudent ? 7 : 6} className=\"text-center py-12 text-[#94A3B8]\">No {label.toLowerCase()} found</td></tr>}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* User Form Modal */}\n      {showForm && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\n          <div className=\"absolute inset-0 bg-black/40 backdrop-blur-sm\" onClick={() => setShowForm(false)} />\n          <div className=\"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[85vh] overflow-auto animate-fade-up\" onClick={e => e.stopPropagation()}>\n            <div className=\"flex items-center justify-between p-5 border-b border-[#E2E8F0] sticky top-0 bg-white z-10 rounded-t-2xl\">\n              <h3 className=\"text-lg font-bold text-[#0F172A]\">{editing ? 'Edit' : 'Add'} {isStudent ? 'Student' : 'Instructor'}</h3>\n              <button onClick={() => setShowForm(false)} className=\"p-1.5 rounded-lg hover:bg-[#F8FAFC]\"><X size={16} className=\"text-[#64748B]\" /></button>\n            </div>\n            <div className=\"p-5 space-y-4\">\n              <div className=\"grid grid-cols-3 gap-3\">\n                <div><label className=\"block text-[12px] font-semibold text-[#334155] mb-1\">First Name *</label><input value={form.first_name} onChange={e => setForm({...form, first_name: e.target.value})} className=\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\" data-testid=\"user-first-name\" /></div>\n                <div><label className=\"block text-[12px] font-semibold text-[#334155] mb-1\">Middle Name</label><input value={form.middle_name} onChange={e => setForm({...form, middle_name: e.target.value})} className=\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\" /></div>\n                <div><label className=\"block text-[12px] font-semibold text-[#334155] mb-1\">Last Name *</label><input value={form.last_name} onChange={e => setForm({...form, last_name: e.target.value})} className=\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\" data-testid=\"user-last-name\" /></div>\n              </div>\n              <div><label className=\"block text-[12px] font-semibold text-[#334155] mb-1\">Email *</label><input type=\"email\" value={form.email} onChange={e => setForm({...form, email: e.target.value})} className=\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\" data-testid=\"user-email-input\" /></div>\n              {!editing && <div><label className=\"block text-[12px] font-semibold text-[#334155] mb-1\">Password</label><input value={form.password} onChange={e => setForm({...form, password: e.target.value})} placeholder=\"Default: 123456\" className=\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\" data-testid=\"user-password-input\" /></div>}\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div><label className=\"block text-[12px] font-semibold text-[#334155] mb-1\">Date of Birth</label><input type=\"date\" value={form.dob} onChange={e => setForm({...form, dob: e.target.value})} className=\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\" data-testid=\"user-dob\" /></div>\n                <div><label className=\"block text-[12px] font-semibold text-[#334155] mb-1\">Gender</label><select value={form.gender} onChange={e => setForm({...form, gender: e.target.value})} className=\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\" data-testid=\"user-gender\"><option value=\"\">Select</option><option value=\"male\">Male</option><option value=\"female\">Female</option><option value=\"other\">Other</option></select></div>\n              </div>\n              <div><label className=\"block text-[12px] font-semibold text-[#334155] mb-1\">Phone Number</label><input value={form.phone} onChange={e => setForm({...form, phone: e.target.value})} className=\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\" data-testid=\"user-phone\" /></div>\n              {isStudent && (\n                <>\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    <div><label className=\"block text-[12px] font-semibold text-[#334155] mb-1\">School Name</label><input value={form.school_name} onChange={e => setForm({...form, school_name: e.target.value})} className=\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\" data-testid=\"user-school\" /></div>\n                    <div><label className=\"block text-[12px] font-semibold text-[#334155] mb-1\">Class Name</label><input value={form.class_name} onChange={e => setForm({...form, class_name: e.target.value})} className=\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\" data-testid=\"user-class\" /></div>\n                  </div>\n                  <div><label className=\"block text-[12px] font-semibold text-[#334155] mb-1\">Guardian Name</label><input value={form.guardian_name} onChange={e => setForm({...form, guardian_name: e.target.value})} className=\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488]\" data-testid=\"user-guardian\" /></div>\n                </>\n              )}\n              <div><label className=\"block text-[12px] font-semibold text-[#334155] mb-1\">Assign Courses</label>\n                <div className=\"space-y-1.5 max-h-32 overflow-auto p-2 border border-[#E2E8F0] rounded-xl\">\n                  {courses.filter(c => c.status === 'published').map(c => (\n                    <label key={c.course_id} className=\"flex items-center gap-2 text-sm cursor-pointer hover:bg-[#F8FAFC] p-1 rounded-lg\">\n                      <input type=\"checkbox\" checked={form.course_ids?.includes(c.course_id)} onChange={e => setForm({...form, course_ids: e.target.checked ? [...(form.course_ids||[]), c.course_id] : (form.course_ids||[]).filter(id => id !== c.course_id)})} className=\"rounded text-[#0D9488]\" />\n                      <span className=\"text-[#334155]\">{c.title}</span>\n                    </label>\n                  ))}\n                </div>\n              </div>\n              <div><label className=\"block text-[12px] font-semibold text-[#334155] mb-1\">Bio</label><textarea value={form.bio} onChange={e => setForm({...form, bio: e.target.value})} rows={2} className=\"w-full px-3 py-2.5 rounded-xl border border-[#E2E8F0] text-sm outline-none focus:border-[#0D9488] resize-none\" /></div>\n            </div>\n            <div className=\"flex justify-end gap-2 p-5 border-t border-[#E2E8F0] sticky bottom-0 bg-white rounded-b-2xl\">\n              <button onClick={() => setShowForm(false)} className=\"px-4 py-2.5 text-sm font-bold text-[#64748B] hover:bg-[#F8FAFC] rounded-xl\" style={{ fontFamily: 'Space Mono' }}>Cancel</button>\n              <button onClick={saveUser} className=\"px-6 py-2.5 text-sm font-bold text-white bg-gradient-to-r from-[#0D9488] to-[#14B8A6] rounded-xl active:scale-[0.97] transition-all\" style={{ fontFamily: 'Space Mono' }} data-testid=\"save-user-btn\">Save</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* View User Detail */}\n      {viewUser && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\n          <div className=\"absolute inset-0 bg-black/40 backdrop-blur-sm\" onClick={() => setViewUser(null)} />\n          <div className=\"relative bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[85vh] overflow-auto animate-fade-up\" data-testid=\"user-detail-modal\">\n            <div className=\"flex items-center justify-between p-5 border-b border-[#E2E8F0] sticky top-0 bg-white z-10 rounded-t-2xl\">\n              <h3 className=\"text-lg font-bold text-[#0F172A]\">Profile Details</h3>\n              <button onClick={() => setViewUser(null)} className=\"p-1.5 rounded-lg hover:bg-[#F8FAFC]\"><X size={16} /></button>\n            </div>\n            <div className=\"p-5\">\n              <div className=\"flex items-center gap-4 mb-5\">\n                <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br from-[#F0FDFA] to-[#CCFBF1] flex items-center justify-center text-[#0D9488] font-bold text-2xl\">{viewUser.name?.charAt(0)}</div>\n                <div>\n                  <p className=\"text-lg font-bold text-[#0F172A]\">{viewUser.name}</p>\n                  <p className=\"text-sm text-[#64748B]\">{viewUser.email}</p>\n                  <span className={`inline-flex items-center mt-1 px-2 py-0.5 rounded-full text-[10px] font-bold ${viewUser.status === 'active' ? 'bg-emerald-50 text-emerald-600' : 'bg-red-50 text-red-600'}`} style={{ fontFamily: 'Space Mono' }}>{viewUser.status}</span>\n                </div>\n              </div>\n              <div className=\"grid grid-cols-2 gap-3 text-sm\">\n                {[\n                  ['Gender', viewUser.gender || '-'],\n                  ['Age', viewUser.dob ? calcAge(viewUser.dob) : '-'],\n                  ['Phone', viewUser.phone || '-'],\n                  ['Points', viewUser.points || 0],\n                  ...(isStudent ? [['School', viewUser.school_name || '-'], ['Class', viewUser.class_name || '-'], ['Guardian', viewUser.guardian_name || '-']] : []),\n                  ['Joined', new Date(viewUser.created_at).toLocaleDateString()],\n                ].map(([k, v]) => (\n                  <div key={k} className=\"p-2.5 bg-[#F8FAFC] rounded-xl\">\n                    <p className=\"text-[10px] font-bold text-[#94A3B8] uppercase tracking-wider\" style={{ fontFamily: 'Space Mono' }}>{k}</p>\n                    <p className=\"text-[#0F172A] font-medium mt-0.5\">{v}</p>\n                  </div>\n                ))}\n              </div>\n              {viewUser.bio && <div className=\"mt-3 p-3 bg-[#F8FAFC] rounded-xl\"><p className=\"text-[10px] font-bold text-[#94A3B8] uppercase mb-1\" style={{ fontFamily: 'Space Mono' }}>Bio</p><p className=\"text-sm text-[#334155]\">{viewUser.bio}</p></div>}\n              {isStudent && viewUser.enrolled_courses && viewUser.enrolled_courses.length > 0 && (\n                <div className=\"mt-3\" data-testid=\"user-enrolled-courses\">\n                  <p className=\"text-[10px] font-bold text-[#94A3B8] uppercase tracking-wider mb-2\" style={{ fontFamily: 'Space Mono' }}>Enrolled Courses</p>\n                  <div className=\"space-y-2\">\n                    {viewUser.enrolled_courses.map(ec => (\n                      <div key={ec.enrollment_id} className=\"flex items-center justify-between p-2.5 bg-[#F0FDFA] rounded-xl border border-[#CCFBF1]\">\n                        <div>\n                          <p className=\"text-sm font-medium text-[#0F172A]\">{ec.course_title}</p>\n                          <p className=\"text-[10px] text-[#64748B]\">Enrolled {new Date(ec.enrolled_at).toLocaleDateString()}</p>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          <div className=\"w-16 bg-[#E2E8F0] rounded-full h-1.5\">\n                            <div className=\"h-full bg-[#0D9488] rounded-full\" style={{ width: `${ec.progress}%` }} />\n                          </div>\n                          <span className=\"text-[10px] font-bold text-[#0D9488]\" style={{ fontFamily: 'Space Mono' }}>{ec.progress}%</span>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Confirm Modals */}\n      <ConfirmModal\n        isOpen={confirmAction?.type === 'delete'}\n        onClose={() => setConfirmAction(null)}\n        onConfirm={() => handleDelete(confirmAction?.userId)}\n        title=\"Delete User\"\n        message={`Are you sure you want to permanently delete ${confirmAction?.name}? This action cannot be undone.`}\n        confirmLabel=\"Delete\"\n        variant=\"danger\"\n      />\n      <ConfirmModal\n        isOpen={confirmAction?.type === 'suspend'}\n        onClose={() => setConfirmAction(null)}\n        onConfirm={() => handleSuspend(confirmAction?.userId)}\n        title=\"Suspend Account\"\n        message={`Are you sure you want to suspend ${confirmAction?.name}'s account? They will not be able to access the platform.`}\n        confirmLabel=\"Suspend\"\n        variant=\"warning\"\n      />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}