{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import API from'../../api';import{useAuth}from'../../context/AuthContext';import{ArrowLeft,CheckCircle2,Circle,Play,FileText,ChevronDown,ChevronRight,Clock,Lock,Award,FileQuestion}from'lucide-react';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function CourseView(){var _course$modules3;const{courseId}=useParams();const{user}=useAuth();const navigate=useNavigate();const[course,setCourse]=useState(null);const[enrollment,setEnrollment]=useState(null);const[activeLesson,setActiveLesson]=useState(null);const[expandedModules,setExpandedModules]=useState({});const[quizzes,setQuizzes]=useState([]);const[certStatus,setCertStatus]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{Promise.all([API.get(\"/api/courses/\".concat(courseId)),API.get('/api/enrollments',{params:{course_id:courseId}}),API.get('/api/quizzes',{params:{course_id:courseId}}),API.get(\"/api/certificates/check/\".concat(courseId)).catch(()=>({data:null}))]).then(_ref=>{var _c$data$modules,_c$data$modules2;let[c,e,q,cert]=_ref;setCourse(c.data);const myEnrollment=e.data.find(en=>en.student_id===(user===null||user===void 0?void 0:user.user_id));setEnrollment(myEnrollment);setQuizzes(q.data);setCertStatus(cert.data);const expanded={};(_c$data$modules=c.data.modules)===null||_c$data$modules===void 0?void 0:_c$data$modules.forEach(m=>{expanded[m.module_id]=true;});setExpandedModules(expanded);const allLessons=((_c$data$modules2=c.data.modules)===null||_c$data$modules2===void 0?void 0:_c$data$modules2.flatMap(m=>m.lessons))||[];const firstUncompleted=allLessons.find(l=>{var _myEnrollment$complet;return!(myEnrollment!==null&&myEnrollment!==void 0&&(_myEnrollment$complet=myEnrollment.completed_lessons)!==null&&_myEnrollment$complet!==void 0&&_myEnrollment$complet.includes(l.lesson_id));});setActiveLesson(firstUncompleted||allLessons[0]);}).catch(()=>toast.error('Error loading course')).finally(()=>setLoading(false));},[courseId]);const completeLesson=async lessonId=>{try{const res=await API.post(\"/api/lessons/\".concat(lessonId,\"/complete\"));setEnrollment(prev=>_objectSpread(_objectSpread({},prev),{},{completed_lessons:[...((prev===null||prev===void 0?void 0:prev.completed_lessons)||[]),lessonId],progress:res.data.progress}));toast.success('Lesson completed!');// Auto-check certificate\nAPI.get(\"/api/certificates/check/\".concat(courseId)).then(r=>setCertStatus(r.data)).catch(()=>{});}catch(e){var _e$response,_e$response$data;toast.error(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.detail)||'Error');}};const isCompleted=lessonId=>{var _enrollment$completed;return enrollment===null||enrollment===void 0?void 0:(_enrollment$completed=enrollment.completed_lessons)===null||_enrollment$completed===void 0?void 0:_enrollment$completed.includes(lessonId);};const isLocked=lesson=>{var _course$modules;if(!course||!enrollment)return false;const allLessons=((_course$modules=course.modules)===null||_course$modules===void 0?void 0:_course$modules.flatMap(m=>m.lessons))||[];const idx=allLessons.findIndex(l=>l.lesson_id===lesson.lesson_id);if(idx===0)return false;const prevLesson=allLessons[idx-1];return prevLesson&&!isCompleted(prevLesson.lesson_id);};const getNextLesson=()=>{var _course$modules2;if(!activeLesson||!course)return null;const allLessons=((_course$modules2=course.modules)===null||_course$modules2===void 0?void 0:_course$modules2.flatMap(m=>m.lessons))||[];const idx=allLessons.findIndex(l=>l.lesson_id===activeLesson.lesson_id);return idx<allLessons.length-1?allLessons[idx+1]:null;};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 border-4 border-[#0D9488] border-t-transparent rounded-full animate-spin\"})});if(!course)return/*#__PURE__*/_jsx(\"p\",{children:\"Course not found\"});const nextLesson=getNextLesson();return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row h-[calc(100vh-7rem)] -m-6 md:-m-8\",\"data-testid\":\"course-view\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-full md:w-80 border-r border-[#E2E8F0] bg-white overflow-y-auto shrink-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b border-[#E2E8F0]\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/student'),className:\"flex items-center gap-1 text-sm text-[#0D9488] hover:underline mb-3\",style:{fontFamily:'Space Mono'},\"data-testid\":\"back-to-dashboard\",children:[/*#__PURE__*/_jsx(ArrowLeft,{size:14}),\"Back\"]}),/*#__PURE__*/_jsx(\"h2\",{className:\"font-bold text-[#0F172A] text-sm leading-tight\",children:course.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mt-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 bg-[#F1F5F9] rounded-full h-2 overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full bg-gradient-to-r from-[#0D9488] to-[#14B8A6] rounded-full transition-all duration-500\",style:{width:\"\".concat((enrollment===null||enrollment===void 0?void 0:enrollment.progress)||0,\"%\")}})}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs font-bold text-[#0D9488]\",style:{fontFamily:'Space Mono'},children:[Math.round((enrollment===null||enrollment===void 0?void 0:enrollment.progress)||0),\"%\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"py-1\",children:[(_course$modules3=course.modules)===null||_course$modules3===void 0?void 0:_course$modules3.map((m,mi)=>{var _m$lessons;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setExpandedModules(prev=>_objectSpread(_objectSpread({},prev),{},{[m.module_id]:!prev[m.module_id]})),className:\"w-full flex items-center justify-between px-4 py-3 hover:bg-[#F8FAFC] transition-colors\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-[13px] font-bold text-[#0F172A] text-left\",children:[mi+1,\". \",m.title]}),expandedModules[m.module_id]?/*#__PURE__*/_jsx(ChevronDown,{size:14,className:\"text-[#94A3B8]\"}):/*#__PURE__*/_jsx(ChevronRight,{size:14,className:\"text-[#94A3B8]\"})]}),expandedModules[m.module_id]&&/*#__PURE__*/_jsx(\"div\",{className:\"pb-1\",children:(_m$lessons=m.lessons)===null||_m$lessons===void 0?void 0:_m$lessons.map(l=>{const locked=isLocked(l);return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>!locked&&setActiveLesson(l),disabled:locked,className:\"w-full flex items-center gap-3 px-6 py-2.5 text-left transition-all \".concat(locked?'opacity-40 cursor-not-allowed':'',\" \").concat((activeLesson===null||activeLesson===void 0?void 0:activeLesson.lesson_id)===l.lesson_id?'bg-[#F0FDFA] border-r-2 border-[#0D9488]':'hover:bg-[#F8FAFC]'),\"data-testid\":\"lesson-nav-\".concat(l.lesson_id),children:[locked?/*#__PURE__*/_jsx(Lock,{size:14,className:\"text-[#CBD5E1] shrink-0\"}):isCompleted(l.lesson_id)?/*#__PURE__*/_jsx(CheckCircle2,{size:14,className:\"text-emerald-500 shrink-0\"}):/*#__PURE__*/_jsx(Circle,{size:14,className:\"text-[#CBD5E1] shrink-0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-[13px] truncate \".concat((activeLesson===null||activeLesson===void 0?void 0:activeLesson.lesson_id)===l.lesson_id?'font-semibold text-[#0D9488]':'text-[#334155]'),children:l.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-[11px] text-[#94A3B8]\",children:[l.type==='video'?/*#__PURE__*/_jsx(Play,{size:9}):/*#__PURE__*/_jsx(FileText,{size:9}),/*#__PURE__*/_jsx(\"span\",{children:l.duration})]})]})]},l.lesson_id);})})]},m.module_id);}),quizzes.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-[#E2E8F0] mt-2 pt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"px-4 py-2 text-[11px] font-bold text-[#94A3B8] uppercase tracking-wider\",style:{fontFamily:'Space Mono'},children:\"Quizzes\"}),quizzes.map(q=>{var _q$questions;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(\"/student/quiz/\".concat(q.quiz_id)),className:\"w-full flex items-center gap-3 px-6 py-2.5 text-left hover:bg-[#F8FAFC] transition-colors\",\"data-testid\":\"quiz-link-\".concat(q.quiz_id),children:[/*#__PURE__*/_jsx(FileQuestion,{size:14,className:\"text-[#8B5CF6] shrink-0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-[13px] text-[#334155] truncate\",children:q.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[11px] text-[#94A3B8]\",children:[((_q$questions=q.questions)===null||_q$questions===void 0?void 0:_q$questions.length)||0,\" questions\"]})]})]},q.quiz_id);})]}),certStatus&&/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-[#E2E8F0] mt-2 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 rounded-xl \".concat(certStatus.eligible?'bg-emerald-50 border border-emerald-200':'bg-[#F8FAFC] border border-[#E2E8F0]'),\"data-testid\":\"cert-status\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-1\",children:[/*#__PURE__*/_jsx(Award,{size:16,className:certStatus.eligible?'text-emerald-500':'text-[#94A3B8]'}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-bold\",style:{fontFamily:'Space Mono',color:certStatus.eligible?'#10B981':'#94A3B8'},children:certStatus.eligible?'CERTIFICATE UNLOCKED':'CERTIFICATE LOCKED'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[11px] text-[#64748B]\",children:[\"Lessons: \",certStatus.lessons_completed,\"/\",certStatus.total_lessons,\" | Quiz avg: \",certStatus.avg_quiz_score,\"%\"]})]})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto bg-[#F8FAFC] p-6 md:p-8\",children:activeLesson?/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-3xl mx-auto animate-fade-up\",\"data-testid\":\"lesson-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-0.5 rounded-lg text-[11px] font-bold \".concat(activeLesson.type==='video'?'bg-blue-50 text-blue-600':'bg-emerald-50 text-emerald-600'),style:{fontFamily:'Space Mono'},children:activeLesson.type}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1 text-xs text-[#94A3B8]\",children:[/*#__PURE__*/_jsx(Clock,{size:10}),activeLesson.duration]})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-[#0F172A] mb-6\",children:activeLesson.title}),activeLesson.youtube_url&&/*#__PURE__*/_jsx(\"div\",{className:\"aspect-video rounded-2xl overflow-hidden mb-6 bg-[#0F172A] shadow-lg\",children:/*#__PURE__*/_jsx(\"iframe\",{src:activeLesson.youtube_url,className:\"w-full h-full\",allow:\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",allowFullScreen:true,title:activeLesson.title})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-2xl border border-[#E2E8F0] p-6 md:p-8 prose shadow-sm\",\"data-testid\":\"lesson-text-content\",children:/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:activeLesson.content}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex items-center justify-between\",children:[isCompleted(activeLesson.lesson_id)?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-emerald-500\",children:[/*#__PURE__*/_jsx(CheckCircle2,{size:18}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold\",style:{fontFamily:'Space Mono'},children:\"Completed\"})]}):/*#__PURE__*/_jsxs(\"button\",{onClick:()=>completeLesson(activeLesson.lesson_id),className:\"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-[#0D9488] to-[#14B8A6] text-white rounded-xl font-bold text-sm active:scale-[0.97] transition-all shadow-lg shadow-teal-500/20\",style:{fontFamily:'Space Mono'},\"data-testid\":\"mark-complete-btn\",children:[/*#__PURE__*/_jsx(CheckCircle2,{size:16}),\"Mark as Complete\"]}),nextLesson&&!isLocked(nextLesson)&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveLesson(nextLesson),className:\"flex items-center gap-1 text-sm font-bold text-[#0D9488] hover:underline\",style:{fontFamily:'Space Mono'},\"data-testid\":\"next-lesson-btn\",children:[\"Next Lesson \",/*#__PURE__*/_jsx(ChevronRight,{size:14})]}),nextLesson&&isLocked(nextLesson)&&/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1 text-sm text-[#94A3B8]\",children:[/*#__PURE__*/_jsx(Lock,{size:12}),\"Complete this lesson to continue\"]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-16\",children:[/*#__PURE__*/_jsx(BookOpen,{size:40,className:\"text-[#E2E8F0] mx-auto mb-3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[#94A3B8]\",children:\"Select a lesson to start learning\"})]})})]});}function BookOpen(props){return/*#__PURE__*/_jsxs(\"svg\",_objectSpread(_objectSpread({xmlns:\"http://www.w3.org/2000/svg\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"},props),{},{children:[/*#__PURE__*/_jsx(\"path\",{d:\"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z\"})]}));}","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","API","useAuth","ArrowLeft","CheckCircle2","Circle","Play","FileText","ChevronDown","ChevronRight","Clock","Lock","Award","FileQuestion","toast","jsx","_jsx","jsxs","_jsxs","CourseView","_course$modules3","courseId","user","navigate","course","setCourse","enrollment","setEnrollment","activeLesson","setActiveLesson","expandedModules","setExpandedModules","quizzes","setQuizzes","certStatus","setCertStatus","loading","setLoading","Promise","all","get","concat","params","course_id","catch","data","then","_ref","_c$data$modules","_c$data$modules2","c","e","q","cert","myEnrollment","find","en","student_id","user_id","expanded","modules","forEach","m","module_id","allLessons","flatMap","lessons","firstUncompleted","l","_myEnrollment$complet","completed_lessons","includes","lesson_id","error","finally","completeLesson","lessonId","res","post","prev","_objectSpread","progress","success","r","_e$response","_e$response$data","response","detail","isCompleted","_enrollment$completed","isLocked","lesson","_course$modules","idx","findIndex","prevLesson","getNextLesson","_course$modules2","length","className","children","nextLesson","onClick","style","fontFamily","size","title","width","Math","round","map","mi","_m$lessons","locked","disabled","type","duration","_q$questions","quiz_id","questions","eligible","color","lessons_completed","total_lessons","avg_quiz_score","youtube_url","src","allow","allowFullScreen","dangerouslySetInnerHTML","__html","content","BookOpen","props","xmlns","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d"],"sources":["/app/frontend/src/pages/student/CourseView.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport API from '../../api';\nimport { useAuth } from '../../context/AuthContext';\nimport { ArrowLeft, CheckCircle2, Circle, Play, FileText, ChevronDown, ChevronRight, Clock, Lock, Award, FileQuestion } from 'lucide-react';\nimport toast from 'react-hot-toast';\n\nexport default function CourseView() {\n  const { courseId } = useParams();\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [course, setCourse] = useState(null);\n  const [enrollment, setEnrollment] = useState(null);\n  const [activeLesson, setActiveLesson] = useState(null);\n  const [expandedModules, setExpandedModules] = useState({});\n  const [quizzes, setQuizzes] = useState([]);\n  const [certStatus, setCertStatus] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    Promise.all([\n      API.get(`/api/courses/${courseId}`),\n      API.get('/api/enrollments', { params: { course_id: courseId } }),\n      API.get('/api/quizzes', { params: { course_id: courseId } }),\n      API.get(`/api/certificates/check/${courseId}`).catch(() => ({ data: null })),\n    ]).then(([c, e, q, cert]) => {\n      setCourse(c.data);\n      const myEnrollment = e.data.find(en => en.student_id === user?.user_id);\n      setEnrollment(myEnrollment);\n      setQuizzes(q.data);\n      setCertStatus(cert.data);\n      const expanded = {};\n      c.data.modules?.forEach(m => { expanded[m.module_id] = true; });\n      setExpandedModules(expanded);\n      const allLessons = c.data.modules?.flatMap(m => m.lessons) || [];\n      const firstUncompleted = allLessons.find(l => !myEnrollment?.completed_lessons?.includes(l.lesson_id));\n      setActiveLesson(firstUncompleted || allLessons[0]);\n    }).catch(() => toast.error('Error loading course')).finally(() => setLoading(false));\n  }, [courseId]);\n\n  const completeLesson = async (lessonId) => {\n    try {\n      const res = await API.post(`/api/lessons/${lessonId}/complete`);\n      setEnrollment(prev => ({\n        ...prev,\n        completed_lessons: [...(prev?.completed_lessons || []), lessonId],\n        progress: res.data.progress\n      }));\n      toast.success('Lesson completed!');\n      // Auto-check certificate\n      API.get(`/api/certificates/check/${courseId}`).then(r => setCertStatus(r.data)).catch(() => {});\n    } catch (e) { toast.error(e.response?.data?.detail || 'Error'); }\n  };\n\n  const isCompleted = (lessonId) => enrollment?.completed_lessons?.includes(lessonId);\n\n  const isLocked = (lesson) => {\n    if (!course || !enrollment) return false;\n    const allLessons = course.modules?.flatMap(m => m.lessons) || [];\n    const idx = allLessons.findIndex(l => l.lesson_id === lesson.lesson_id);\n    if (idx === 0) return false;\n    const prevLesson = allLessons[idx - 1];\n    return prevLesson && !isCompleted(prevLesson.lesson_id);\n  };\n\n  const getNextLesson = () => {\n    if (!activeLesson || !course) return null;\n    const allLessons = course.modules?.flatMap(m => m.lessons) || [];\n    const idx = allLessons.findIndex(l => l.lesson_id === activeLesson.lesson_id);\n    return idx < allLessons.length - 1 ? allLessons[idx + 1] : null;\n  };\n\n  if (loading) return <div className=\"flex items-center justify-center h-64\"><div className=\"w-8 h-8 border-4 border-[#0D9488] border-t-transparent rounded-full animate-spin\" /></div>;\n  if (!course) return <p>Course not found</p>;\n\n  const nextLesson = getNextLesson();\n\n  return (\n    <div className=\"flex flex-col md:flex-row h-[calc(100vh-7rem)] -m-6 md:-m-8\" data-testid=\"course-view\">\n      {/* Sidebar */}\n      <div className=\"w-full md:w-80 border-r border-[#E2E8F0] bg-white overflow-y-auto shrink-0\">\n        <div className=\"p-4 border-b border-[#E2E8F0]\">\n          <button onClick={() => navigate('/student')} className=\"flex items-center gap-1 text-sm text-[#0D9488] hover:underline mb-3\" style={{ fontFamily: 'Space Mono' }} data-testid=\"back-to-dashboard\"><ArrowLeft size={14} />Back</button>\n          <h2 className=\"font-bold text-[#0F172A] text-sm leading-tight\">{course.title}</h2>\n          <div className=\"flex items-center gap-2 mt-3\">\n            <div className=\"flex-1 bg-[#F1F5F9] rounded-full h-2 overflow-hidden\">\n              <div className=\"h-full bg-gradient-to-r from-[#0D9488] to-[#14B8A6] rounded-full transition-all duration-500\" style={{ width: `${enrollment?.progress || 0}%` }} />\n            </div>\n            <span className=\"text-xs font-bold text-[#0D9488]\" style={{ fontFamily: 'Space Mono' }}>{Math.round(enrollment?.progress || 0)}%</span>\n          </div>\n        </div>\n\n        <div className=\"py-1\">\n          {course.modules?.map((m, mi) => (\n            <div key={m.module_id}>\n              <button onClick={() => setExpandedModules(prev => ({ ...prev, [m.module_id]: !prev[m.module_id] }))} className=\"w-full flex items-center justify-between px-4 py-3 hover:bg-[#F8FAFC] transition-colors\">\n                <span className=\"text-[13px] font-bold text-[#0F172A] text-left\">{mi + 1}. {m.title}</span>\n                {expandedModules[m.module_id] ? <ChevronDown size={14} className=\"text-[#94A3B8]\" /> : <ChevronRight size={14} className=\"text-[#94A3B8]\" />}\n              </button>\n              {expandedModules[m.module_id] && (\n                <div className=\"pb-1\">\n                  {m.lessons?.map((l) => {\n                    const locked = isLocked(l);\n                    return (\n                      <button key={l.lesson_id}\n                        onClick={() => !locked && setActiveLesson(l)}\n                        disabled={locked}\n                        className={`w-full flex items-center gap-3 px-6 py-2.5 text-left transition-all ${locked ? 'opacity-40 cursor-not-allowed' : ''} ${activeLesson?.lesson_id === l.lesson_id ? 'bg-[#F0FDFA] border-r-2 border-[#0D9488]' : 'hover:bg-[#F8FAFC]'}`}\n                        data-testid={`lesson-nav-${l.lesson_id}`}>\n                        {locked ? <Lock size={14} className=\"text-[#CBD5E1] shrink-0\" /> :\n                          isCompleted(l.lesson_id) ? <CheckCircle2 size={14} className=\"text-emerald-500 shrink-0\" /> :\n                            <Circle size={14} className=\"text-[#CBD5E1] shrink-0\" />}\n                        <div className=\"flex-1 min-w-0\">\n                          <p className={`text-[13px] truncate ${activeLesson?.lesson_id === l.lesson_id ? 'font-semibold text-[#0D9488]' : 'text-[#334155]'}`}>{l.title}</p>\n                          <div className=\"flex items-center gap-2 text-[11px] text-[#94A3B8]\">\n                            {l.type === 'video' ? <Play size={9} /> : <FileText size={9} />}\n                            <span>{l.duration}</span>\n                          </div>\n                        </div>\n                      </button>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n          ))}\n\n          {/* Quizzes Section */}\n          {quizzes.length > 0 && (\n            <div className=\"border-t border-[#E2E8F0] mt-2 pt-2\">\n              <p className=\"px-4 py-2 text-[11px] font-bold text-[#94A3B8] uppercase tracking-wider\" style={{ fontFamily: 'Space Mono' }}>Quizzes</p>\n              {quizzes.map(q => (\n                <button key={q.quiz_id} onClick={() => navigate(`/student/quiz/${q.quiz_id}`)}\n                  className=\"w-full flex items-center gap-3 px-6 py-2.5 text-left hover:bg-[#F8FAFC] transition-colors\" data-testid={`quiz-link-${q.quiz_id}`}>\n                  <FileQuestion size={14} className=\"text-[#8B5CF6] shrink-0\" />\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"text-[13px] text-[#334155] truncate\">{q.title}</p>\n                    <p className=\"text-[11px] text-[#94A3B8]\">{q.questions?.length || 0} questions</p>\n                  </div>\n                </button>\n              ))}\n            </div>\n          )}\n\n          {/* Certificate Status */}\n          {certStatus && (\n            <div className=\"border-t border-[#E2E8F0] mt-2 p-4\">\n              <div className={`p-3 rounded-xl ${certStatus.eligible ? 'bg-emerald-50 border border-emerald-200' : 'bg-[#F8FAFC] border border-[#E2E8F0]'}`} data-testid=\"cert-status\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <Award size={16} className={certStatus.eligible ? 'text-emerald-500' : 'text-[#94A3B8]'} />\n                  <span className=\"text-xs font-bold\" style={{ fontFamily: 'Space Mono', color: certStatus.eligible ? '#10B981' : '#94A3B8' }}>\n                    {certStatus.eligible ? 'CERTIFICATE UNLOCKED' : 'CERTIFICATE LOCKED'}\n                  </span>\n                </div>\n                <p className=\"text-[11px] text-[#64748B]\">\n                  Lessons: {certStatus.lessons_completed}/{certStatus.total_lessons} | Quiz avg: {certStatus.avg_quiz_score}%\n                </p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"flex-1 overflow-y-auto bg-[#F8FAFC] p-6 md:p-8\">\n        {activeLesson ? (\n          <div className=\"max-w-3xl mx-auto animate-fade-up\" data-testid=\"lesson-content\">\n            <div className=\"flex items-center gap-2 mb-2\">\n              <span className={`px-2 py-0.5 rounded-lg text-[11px] font-bold ${activeLesson.type === 'video' ? 'bg-blue-50 text-blue-600' : 'bg-emerald-50 text-emerald-600'}`} style={{ fontFamily: 'Space Mono' }}>{activeLesson.type}</span>\n              <span className=\"flex items-center gap-1 text-xs text-[#94A3B8]\"><Clock size={10} />{activeLesson.duration}</span>\n            </div>\n            <h1 className=\"text-2xl font-bold text-[#0F172A] mb-6\">{activeLesson.title}</h1>\n\n            {activeLesson.youtube_url && (\n              <div className=\"aspect-video rounded-2xl overflow-hidden mb-6 bg-[#0F172A] shadow-lg\">\n                <iframe src={activeLesson.youtube_url} className=\"w-full h-full\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowFullScreen title={activeLesson.title} />\n              </div>\n            )}\n\n            <div className=\"bg-white rounded-2xl border border-[#E2E8F0] p-6 md:p-8 prose shadow-sm\" data-testid=\"lesson-text-content\">\n              <div dangerouslySetInnerHTML={{ __html: activeLesson.content }} />\n            </div>\n\n            <div className=\"mt-6 flex items-center justify-between\">\n              {isCompleted(activeLesson.lesson_id) ? (\n                <div className=\"flex items-center gap-2 text-emerald-500\">\n                  <CheckCircle2 size={18} />\n                  <span className=\"text-sm font-bold\" style={{ fontFamily: 'Space Mono' }}>Completed</span>\n                </div>\n              ) : (\n                <button onClick={() => completeLesson(activeLesson.lesson_id)}\n                  className=\"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-[#0D9488] to-[#14B8A6] text-white rounded-xl font-bold text-sm active:scale-[0.97] transition-all shadow-lg shadow-teal-500/20\"\n                  style={{ fontFamily: 'Space Mono' }} data-testid=\"mark-complete-btn\">\n                  <CheckCircle2 size={16} />Mark as Complete\n                </button>\n              )}\n\n              {nextLesson && !isLocked(nextLesson) && (\n                <button onClick={() => setActiveLesson(nextLesson)}\n                  className=\"flex items-center gap-1 text-sm font-bold text-[#0D9488] hover:underline\" style={{ fontFamily: 'Space Mono' }} data-testid=\"next-lesson-btn\">\n                  Next Lesson <ChevronRight size={14} />\n                </button>\n              )}\n              {nextLesson && isLocked(nextLesson) && (\n                <span className=\"flex items-center gap-1 text-sm text-[#94A3B8]\"><Lock size={12} />Complete this lesson to continue</span>\n              )}\n            </div>\n          </div>\n        ) : (\n          <div className=\"text-center py-16\">\n            <BookOpen size={40} className=\"text-[#E2E8F0] mx-auto mb-3\" />\n            <p className=\"text-[#94A3B8]\">Select a lesson to start learning</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction BookOpen(props) {\n  return <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" {...props}><path d=\"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z\"></path><path d=\"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z\"></path></svg>;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}